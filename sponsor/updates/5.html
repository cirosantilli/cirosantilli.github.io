<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Ciro's Edict #5 - Ciro Santilli</title>
<meta property="og:title" content="Ciro's Edict #5 - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://raw.githubusercontent.com/cirosantilli/media/master/cirodown-metadata-before-fontawesome.png">
<meta property="og:url" content="https://cirosantilli.com/sponsor/updates/5">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="canonical" href="https://ourbigbook.com/cirosantilli/sponsor/updates/5">
<style>@import "../../_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="../../_raw/main.css">
<link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
</head>
<body>
<header>
<div class="brand-group">
<a href="../../" class="brand"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_right_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye">Ciro Santilli</a>
<a href="https://ourbigbook.com/cirosantilli"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ourbigbook-logo-v1.svg" loading="lazy" alt="OurBigBook logo">OurBigBook.com</a>
<a class="font-awesome-container" href="https://stackoverflow.com/users/895245"><i class="fab fa-stack-overflow fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://github.com/cirosantilli"><i class="fab fa-github fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.linkedin.com/in/cirosantilli"><i class="fab fa-linkedin fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.youtube.com/c/CiroSantilli"><i class="fab fa-youtube fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://twitter.com/cirosantilli"><i class="fab fa-twitter fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.zhihu.com/people/cirosantilli/activities"><i class="fab fa-zhihu fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.weibo.com/p/1005055601627311"><i class="fab fa-weibo fa-fw icon"></i></a>
<a href="../../sponsor"><span class="icon">$£</span>&nbsp;Sponsor</a>
<a href="https://github.com/cirosantilli/china-dictatorship"><span class="icon">中国</span>独裁统治&nbsp;China Dictatorship 新疆改造中心、六四事件、法轮功、郝海东、709大抓捕、2015巴拿马文件 邓家贵、低端人口、西藏骚乱</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="5"><div class="notnav"><h1><a href="5-split">Ciro's Edict #5 <span class="meta">(2022-03-28)</span></a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav ancestors"><a href="../.."><span title="Home" class="fa-solid-900 icon"></span> Home</a><a href="../../ciro-santilli"> Ciro Santilli</a><a href="../../ciro-santilli#update-from-ciro-santilli"> Update from Ciro Santilli</a><a href="../../ciro-santilli#sponsor-updates"> Sponsor updates</a></div><div class="nav"><a href="#_toc" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a><a class="split" href="5-split"></a><span class="metrics"><span class="wcntr"> Words: 1k</span><span class="dcnt"> Articles: 15</span></span></div></nav></div><div class="p" id="_2"><a href="../../cirism">Cirists</a>,</div><div class="toc-container" id="_toc"><ul><li class="has-child toplevel"><div class="title-div"><div class="arrow"><div></div></div><span class="not-arrow"><a class="title toc" href="#_toc"> Table of contents</a><input class="search" placeholder="🔍 Search. Shortcut: / (slash)"><span class="hover-metadata"><span class="metrics"><span class="wcntr"> 1k</span><span class="dcnt"> 15</span></span></span></span></div><ul><li class="has-child"><div id="_toc/ourbigbook-com"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#ourbigbook-com"><i class="n">1. </i>ourbigbook.com</a><span class="hover-metadata"><a href="#_toc" class="u"> Ciro's Edict #5</a><span class="metrics"><span class="wcntr"> 1k</span><span class="dcnt"> 11</span></span></span></span></div><ul><li class="has-child"><div id="_toc/advances"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#advances"><i class="n">1.1. </i>Advances</a><span class="hover-metadata"><a href="#_toc/ourbigbook-com" class="u"> ourbigbook.com</a><span class="metrics"><span class="wcntr"> 890</span><span class="dcnt"> 8</span></span></span></span></div><ul><li><div id="_toc/include-and-x-and-working-on-dynamic-website"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#include-and-x-and-working-on-dynamic-website"><i class="n">1.1.1. </i><code>\Include</code> and <code>\x</code> and working on dynamic website</a><span class="hover-metadata"><a href="#_toc/advances" class="u"> Advances</a><span class="metrics"><span class="wcntr"> 101</span></span></span></span></div></li><li><div id="_toc/improve-header-summary-display"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#improve-header-summary-display"><i class="n">1.1.2. </i>Improve header summary display</a><span class="hover-metadata"><a href="#_toc/advances" class="u"> Advances</a><span class="metrics"><span class="wcntr"> 16</span></span></span></span></div></li><li><div id="_toc/skip-id-extraction-and-rendering-based-on-database-timestamps"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#skip-id-extraction-and-rendering-based-on-database-timestamps"><i class="n">1.1.3. </i>Skip ID extraction and rendering based on database timestamps</a><span class="hover-metadata"><a href="#_toc/advances" class="u"> Advances</a><span class="metrics"><span class="wcntr"> 243</span></span></span></span></div></li><li><div id="_toc/completely-rebrand-cirodown-to-ourbigbook"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#completely-rebrand-cirodown-to-ourbigbook"><i class="n">1.1.4. </i>Completely rebrand Cirodown to OurBigBook</a><span class="hover-metadata"><a href="#_toc/advances" class="u"> Advances</a><span class="metrics"><span class="wcntr"> 90</span></span></span></span></div></li><li><div id="_toc/staging-server"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#staging-server"><i class="n">1.1.5. </i>Staging server</a><span class="hover-metadata"><a href="#_toc/advances" class="u"> Advances</a><span class="metrics"><span class="wcntr"> 42</span></span></span></span></div></li><li><div id="_toc/ourbigbook-library-tested-on-postgresql"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#ourbigbook-library-tested-on-postgresql"><i class="n">1.1.6. </i>OurBigBook Library tested on PostgreSQL</a><span class="hover-metadata"><a href="#_toc/advances" class="u"> Advances</a><span class="metrics"><span class="wcntr"> 79</span></span></span></span></div></li><li class="has-child"><div id="_toc/make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com"><i class="n">1.1.7. </i>Make <code>\Include</code> headers show on table of contents work for cirosantilli.com</a><span class="hover-metadata"><a href="#_toc/advances" class="u"> Advances</a><span class="metrics"><span class="wcntr"> 319</span><span class="dcnt"> 1</span></span></span></span></div><ul><li><div id="_toc/link-to-an-image-or-video-in-another-file-that-has-an-x-on-title-from-another-file"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#link-to-an-image-or-video-in-another-file-that-has-an-x-on-title-from-another-file"><i class="n">1.1.7.1. </i>Link to an image or video in another file that has an <code>\x</code> on title from another file</a><span class="hover-metadata"><a href="#_toc/make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com" class="u"> Make <code>\Include</code> headers show on table of contents work for cirosantilli.com</a><span class="metrics"><span class="wcntr"> 118</span></span></span></span></div></li></ul></li></ul><li><div id="_toc/next-steps"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#next-steps"><i class="n">1.2. </i>Next steps</a><span class="hover-metadata"><a href="#_toc/ourbigbook-com" class="u"> ourbigbook.com</a><span class="metrics"><span class="wcntr"> 97</span></span></span></span></div></li><li><div id="_toc/misc-ourbigbook-com"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#misc-ourbigbook-com"><i class="n">1.3. </i>Misc OurBigBook.com</a><span class="hover-metadata"><a href="#_toc/ourbigbook-com" class="u"> ourbigbook.com</a><span class="metrics"><span class="wcntr"> 69</span></span></span></span></div></li></ul><li><div id="_toc/misc-tech"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#misc-tech"><i class="n">2. </i>Misc tech</a><span class="hover-metadata"><a href="#_toc" class="u"> Ciro's Edict #5</a></span></span></div></li><li><div id="_toc/china-front"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#china-front"><i class="n">3. </i>China front</a><span class="hover-metadata"><a href="#_toc" class="u"> Ciro's Edict #5</a><span class="metrics"><span class="wcntr"> 11</span></span></span></span></div></li><li><div id="_toc/not-work"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#not-work"><i class="n">4. </i>Not work</a><span class="hover-metadata"><a href="#_toc" class="u"> Ciro's Edict #5</a><span class="metrics"><span class="wcntr"> 19</span></span></span></span></div></li></ul></li></ul></div><div class="h" id="ourbigbook-com"><div class="notnav"><h2><a href="5/ourbigbook-com"><span class="number">1. </span>ourbigbook.com</a></h2><span class="hover-meta"> <a class="split" href="5/ourbigbook-com"></a><span class="metrics"><span class="wcntr"> Words: 1k</span><span class="dcnt"> Articles: 11</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Ciro's Edict #5</a><a href="#_toc/ourbigbook-com" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/ourbigbook-com"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="h" id="advances"><div class="notnav"><h3><a href="5/advances"><span class="number">1.1. </span>Advances</a></h3><span class="hover-meta"> <a class="split" href="5/advances"></a><span class="metrics"><span class="wcntr"> Words: 890</span><span class="dcnt"> Articles: 8</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#ourbigbook-com" class="u"> ourbigbook.com</a><a href="#_toc/advances" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/advances"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="h" id="include-and-x-and-working-on-dynamic-website"><div class="notnav"><h4><a href="5/include-and-x-and-working-on-dynamic-website"><span class="number">1.1.1. </span><code>\Include</code> and <code>\x</code> and working on dynamic website</a></h4><span class="hover-meta"> <a class="split" href="5/include-and-x-and-working-on-dynamic-website"></a><span class="metrics"><span class="wcntr"> Words: 101</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#advances" class="u"> Advances</a><a href="#_toc/include-and-x-and-working-on-dynamic-website" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/include-and-x-and-working-on-dynamic-website"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_3">This was the major final step of fully integrating the <a href="../../ciro-santilli-s-projects#ourbigbook-cli">OurBigBook CLI</a> into the dynamic website (besides fixing some nasty bugs that escaped passed by me from the previous newsletter).</div><div class="p" id="_4">The implementation was done by "simply" reusing <a href="https://cirosantilli.com/ourbigbook/h-scope-argument">scopes</a>, e.g.: <code>cirosantilli</code>'s article about <code>mathematics</code> has scope <code>cirosantilli</code> and full ID <code>cirosantilli/mathematics</code>.</div><div class="p" id="_5">That on the website is equivalent to a local file structure of:<div class="code" id="_6"><div><pre><code>cirodown/mathematics.bigb</code></pre></div></div></div><div class="p" id="_7">The problem is that a bunch of subdirectory scope operations were broken locally as well, as it simply wasn't a major use case. But now they became a major use case for , so I fixed them.</div><div class="h" id="improve-header-summary-display"><div class="notnav"><h4><a href="5/improve-header-summary-display"><span class="number">1.1.2. </span>Improve header summary display</a></h4><span class="hover-meta"> <a class="split" href="5/improve-header-summary-display"></a><span class="metrics"><span class="wcntr"> Words: 16</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#advances" class="u"> Advances</a><a href="#_toc/improve-header-summary-display" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/improve-header-summary-display"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="figure"><figure id="image-before"><div class="float-wrap"><a href="https://raw.githubusercontent.com/cirosantilli/media/master/cirodown-metadata-before-fontawesome.png"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/cirodown-metadata-before-fontawesome.png" loading="lazy" height="315"></a></div><figcaption><a href="#image-before"><span class="caption-prefix">Figure 1. </span></a><div class="title">Before</div>. </figcaption></figure></div><div class="figure"><figure id="image-after"><div class="float-wrap"><a href="https://raw.githubusercontent.com/cirosantilli/media/master/cirodown-metadata-after-fontawesome.png"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/cirodown-metadata-after-fontawesome.png" loading="lazy" height="315"></a></div><figcaption><a href="#image-after"><span class="caption-prefix">Figure 2. </span></a><div class="title">After</div>. </figcaption></figure></div><div class="p" id="_8">Added font awesome icons. <a href="https://github.com/ourbigbook/ourbigbook/issues/151">github.com/ourbigbook/ourbigbook/issues/151</a></div><div class="p" id="_9">Didn't manage to subset, but so be it for now: <a href="https://stackoverflow.com/questions/62395038/how-can-i-export-only-one-character-from-ttf-woff-file-to-avoid-load-unnecessa/71197892#71197892">stackoverflow.com/questions/62395038/how-can-i-export-only-one-character-from-ttf-woff-file-to-avoid-load-unnecessa/71197892#71197892</a></div><div class="h" id="skip-id-extraction-and-rendering-based-on-database-timestamps"><div class="notnav"><h4><a href="5/skip-id-extraction-and-rendering-based-on-database-timestamps"><span class="number">1.1.3. </span>Skip ID extraction and rendering based on database timestamps</a></h4><span class="hover-meta"> <a class="split" href="5/skip-id-extraction-and-rendering-based-on-database-timestamps"></a><span class="metrics"><span class="wcntr"> Words: 243</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#advances" class="u"> Advances</a><a href="#_toc/skip-id-extraction-and-rendering-based-on-database-timestamps" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/skip-id-extraction-and-rendering-based-on-database-timestamps"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_10">Now that we can reliably split files at will with <code>\Include</code>, I finally added this feature.</div><div class="p" id="_11">This means while developing a website locally with the <a href="../../ciro-santilli-s-projects#ourbigbook-cli">OurBigBook CLI</a>, if you have a bunch of files with an error in one of them, your first run will run slowly until the error:<div class="code" id="_12"><div><pre><code>extract_ids README.ciro
extract_ids README.ciro finished in 73.82836899906397 ms
extract_ids art.ciro
extract_ids art.ciro finished in 671.1738419979811 ms
extract_ids ciro-santilli.ciro
extract_ids ciro-santilli.ciro finished in 1009.6256089992821 ms
extract_ids science.ciro
error: science.ciro:13686:1: named argument "parent" given multiple times
extract_ids science.ciro finished in 1649.6193730011582 ms</code></pre></div></div>but further runs will blast through the files that worked, skipping all files that have sucessfully converted:<div class="code" id="_13"><div><pre><code>extract_ids README.ciro
extract_ids README.ciro skipped by timestamp
extract_ids art.ciro
extract_ids art.ciro skipped by timestamp
extract_ids ciro-santilli.ciro
extract_ids ciro-santilli.ciro skipped by timestamp
extract_ids science.ciro</code></pre></div></div>so you can fix file by file and move on quickly.</div><div class="p" id="_14">More details at: <a href="https://cirosantilli.com/ourbigbook#no-render-timestamp">cirosantilli.com/ourbigbook#no-render-timestamp</a></div><div class="p" id="_15">This was not fully trivial to implement because we had to rework how duplicate IDs are checked. Previously, we just nuked the DB every time on a directory conversion, and then repopulated everything. If a duplicated showed up on a file, it was a duplicate.</div><div class="p" id="_16">But now that we are not necessarily extracing IDs from every file, we can't just nuke the database anymore, otherwise we'd lose the information. Therefore, what we have to do is to convert every file, and only at the end check the duplicates.</div><div class="p" id="_17">Managed to do that with a single query as documented at: <a href="https://stackoverflow.com/questions/71235548/how-to-find-all-rows-that-have-certain-columns-duplicated-in-sequelize/71235550#71235550">stackoverflow.com/questions/71235548/how-to-find-all-rows-that-have-certain-columns-duplicated-in-sequelize/71235550#71235550</a></div><div class="h" id="completely-rebrand-cirodown-to-ourbigbook"><div class="notnav"><h4><a href="5/completely-rebrand-cirodown-to-ourbigbook"><span class="number">1.1.4. </span>Completely rebrand Cirodown to OurBigBook</a></h4><span class="hover-meta"> <a class="split" href="5/completely-rebrand-cirodown-to-ourbigbook"></a><span class="metrics"><span class="wcntr"> Words: 90</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#advances" class="u"> Advances</a><a href="#_toc/completely-rebrand-cirodown-to-ourbigbook" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/completely-rebrand-cirodown-to-ourbigbook"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_18">The name cirodown should not appear anywhere now, except with very few exceptions, e.g.:<div class="list"><ul id="_19"><li id="_20"><a href="https://github.com/cirosantilli/cirodown">github.com/cirosantilli/cirodown</a> to <a href="https://github.com/ourbigbook/ourbigbook">github.com/ourbigbook/ourbigbook</a></li><li id="_21">file extension from <code>.ciro</code> to <code>.bigb</code></li><li id="_22">the Node.js NPM package was renamed from <code>cirodown</code> to <code>ourbibook</code>.</li><li id="_23">all in-code instances</li></ul></div></div><div class="p" id="_24">I have also squatted <code>OurBigBook</code> on all major social media handles for near future usage, e.g.: <a href="https://twitter.com/ourbigbook">twitter.com/ourbigbook</a> and so on.</div><div class="p" id="_25">I was going to do this sooner or later, it was inevitable, but the timing was partly triggered due to noticing that English speakers (and likely many other nationalities) are not able to easily read/hear/pronounce "Ciro".</div><div class="h" id="staging-server"><div class="notnav"><h4><a href="5/staging-server"><span class="number">1.1.5. </span>Staging server</a></h4><span class="hover-meta"> <a class="split" href="5/staging-server"></a><span class="metrics"><span class="wcntr"> Words: 42</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#advances" class="u"> Advances</a><a href="#_toc/staging-server" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/staging-server"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_26">After breaking production and sweating for a bit hotfixing (not that anyone uses the website yet), I decided to be smart and created a staging server: <a href="https://ourbigbook-staging.herokuapp.com">ourbigbook-staging.herokuapp.com</a>. Now I can blow that server up as I wish without afecting users. Documented at: <a href="https://cirosantilli.com/ourbigbook/staging-deployment">cirosantilli.com/ourbigbook/staging-deployment</a></div><div class="h" id="ourbigbook-library-tested-on-postgresql"><div class="notnav"><h4><a href="5/ourbigbook-library-tested-on-postgresql"><span class="number">1.1.6. </span>OurBigBook Library tested on PostgreSQL</a></h4><span class="hover-meta"> <a class="split" href="5/ourbigbook-library-tested-on-postgresql"></a><span class="metrics"><span class="wcntr"> Words: 79</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#advances" class="u"> Advances</a><a href="#_toc/ourbigbook-library-tested-on-postgresql" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/ourbigbook-library-tested-on-postgresql"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_27">After something broke on the website due to SQLite vs PostgreSQL inconsistencies and took me a day to figure it out, I finally decided to update the test system so that <code>OURBIGBOOK_POSTGRES=true npm test</code> will run the tests on PostgreSQL.</div><div class="p" id="_28">Originally, these were being run only on SQLite, which is the major use case for OurBigBook CLI, which came before the website.</div><div class="p" id="_29">But the website runs on PostgreSQL, so it is fundamental to test things in PostgreSQL as well.</div><div class="h" id="make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com"><div class="notnav"><h4><a href="5/make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com"><span class="number">1.1.7. </span>Make <code>\Include</code> headers show on table of contents work for cirosantilli.com</a></h4><span class="hover-meta"> <a class="split" href="5/make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com"></a><span class="metrics"><span class="wcntr"> Words: 319</span><span class="dcnt"> Articles: 1</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#advances" class="u"> Advances</a><a href="#_toc/make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_30">One of the <a href="4#the-table-of-contents-shows-across-different-files-via-include">key advances of the previous update</a> was to show include headers on the table of contents.</div><div class="p" id="_31">This was to allow splitting source files freely.</div><div class="p" id="_32">While that goal was in principle achieved in that commit, when I went ahead to split the huge index of cirosantilli.com into multiple files, I notice several bugs that took a week to fix.</div><div class="p" id="_33">After all of these were solved, I finally managed to split the <a href="https://github.com/cirosantilli/cirosantilli.github.io/blob/84c8a6e7fdbe252041accfb7a06d9b7462287131/README.ciro">README</a> at: <a href="https://github.com/cirosantilli/cirosantilli.github.io/commit/84c8a6e7fdbe252041accfb7a06d9b7462287131">github.com/cirosantilli/cirosantilli.github.io/commit/84c8a6e7fdbe252041accfb7a06d9b7462287131</a> and keep the previous desired output. You can now see that the README contains just:<div class="code" id="_34"><div><pre><code>\Include[ciro-santilli]
\Include[science]
\Include[mathematics]
\Include[technology]
\Include[art]</code></pre></div></div></div><div class="p" id="_35">This split led to a small positive modification of the output as follows. Previously, a section such as "Quantum Electrodynamics" would have been present in the monolithic README.ciro as:<div class="code" id="_36"><div><pre><code>= Quantum electrodynamics</code></pre></div></div>If you visited <a href="https://cirosantilli.com/quantum-electrodynamics">cirosantilli.com/quantum-electrodynamics</a>, you would see see a link to the "nosplit" version, which would link you back to <a href="https://cirosantilli.com#quantum-electrodynamics">cirosantilli.com#quantum-electrodynamics</a>, but that is not great, since this is was a humongous page with all of the README.ciro, and took long to display.</div><div class="p" id="_37">After the split, <code>= Quantum electrodynamics</code> is present under <code>science.ciro</code>, and the nosplit version is the more manageable <a href="https://cirosantilli.com/science#quantum-electrodynamics">cirosantilli.com/science#quantum-electrodynamics</a>.</div><div class="p" id="_38">The key changes that were missing for that to happen were:<div class="list"><ul id="_39"><li id="_40"><a href="#link-to-an-image-or-video-in-another-file-that-has-an-x-on-title-from-another-file">link to an image or video in another file that has an <code>\x</code> on title from another file</a></li></ul></div></div><div class="h" id="link-to-an-image-or-video-in-another-file-that-has-an-x-on-title-from-another-file"><div class="notnav"><h5><a href="5/link-to-an-image-or-video-in-another-file-that-has-an-x-on-title-from-another-file"><span class="number">1.1.7.1. </span>Link to an image or video in another file that has an <code>\x</code> on title from another file</a></h5><span class="hover-meta"> <a class="split" href="5/link-to-an-image-or-video-in-another-file-that-has-an-x-on-title-from-another-file"></a><span class="metrics"><span class="wcntr"> Words: 118</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#make-include-headers-show-on-table-of-contents-work-for-cirosantilli-com" class="u"> Make <code>\Include</code> headers show on table of contents work for cirosantilli.com</a><a href="#_toc/link-to-an-image-or-video-in-another-file-that-has-an-x-on-title-from-another-file" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/link-to-an-image-or-video-in-another-file-that-has-an-x-on-title-from-another-file"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_41">Issue report at:  <a href="https://github.com/ourbigbook/ourbigbook/issues/198">github.com/ourbigbook/ourbigbook/issues/198</a> Suppose you had:</div><div class="p" id="_42">programming-language.ciro</div><div class="code" id="_43"><div><pre><code>= Programming language

\Image[https://raw.githubusercontent.com/cirosantilli/media/master/python-logo.jpg]
{title=The \x[python-programming-language] logo}

== Python
{c}
{disambiguate=programming-language}</code></pre></div></div><div class="p" id="_44">logos-i-like.ciro</div><div class="code" id="_45"><div><pre><code>= Logos I like

\x[image-the-python-logo]</code></pre></div></div><div class="p" id="_46">Now, when rendering <code>\x[image-the-python-logo]</code>, we would need to fetch two IDs:<div class="list"><ul id="_47"><li id="_48"><code>image-the-python-logo</code> for the <code>The </code> and <code> logo</code> part</li><li id="_49"><code>python-programming-language</code> itself, to know that <code>\x[python-programming-language]</code> should render as <code>Python</code></li></ul></div></div><div class="p" id="_50">But after <a href="4#group-all-sql-queries-together">group all SQL queries together</a> was done, there was no way to know that rendering <code>image-the-python-logo</code> would imply also fetching <code>python-programming-language</code>.</div><div class="p" id="_51">This was solved by adding a new database entry type, <code>REFS_TABLE_X_TITLE_TITLE</code> to the existing References table, which tracks dependencies between IDs.</div><div class="p" id="_52">After this was setup, we can now know that <code>image-the-python-logo</code> depends on <code>image-the-python-logo</code>, and then fetch both of them together in a single <a href="../../sql#join-sql">JOIN</a>.</div><div class="h" id="next-steps"><div class="notnav"><h3><a href="5/next-steps"><span class="number">1.2. </span>Next steps</a></h3><span class="hover-meta"> <a class="split" href="5/next-steps"></a><span class="metrics"><span class="wcntr"> Words: 97</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#ourbigbook-com" class="u"> ourbigbook.com</a><a href="#_toc/next-steps" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/next-steps"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="list"><ul id="_53"><li id="_54">upload all of <a href="https://cirosantilli.com">cirosantilli.com</a> to <a href="https://ourbigbook.com">ourbigbook.com</a>. I will do this by implementing an import from filesystem functionality based on the <a href="../../ciro-santilli-s-projects#ourbigbook-cli">OurBigBook CLI</a>. This will also require implementing slit headeres on the server to work well, I'll need to create one <code>Article</code> for every header on render.</li><li id="_55">get <code>\x</code> and <code>\Include</code> working on the live web preview editor. This will require creating a new simple API, currently the editor jus shows broken references, but final render works because it goes through the database backend</li><li id="_56">implement email verification signup. Finally! Maybe add some notifications too, e.g. on new comments or likes.</li></ul></div><div class="h" id="misc-ourbigbook-com"><div class="notnav"><h3><a href="5/misc-ourbigbook-com"><span class="number">1.3. </span>Misc OurBigBook.com</a></h3><span class="hover-meta"> <a class="split" href="5/misc-ourbigbook-com"></a><span class="metrics"><span class="wcntr"> Words: 69</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#ourbigbook-com" class="u"> ourbigbook.com</a><a href="#_toc/misc-ourbigbook-com" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/misc-ourbigbook-com"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_57">Some smart people just brought up to my attention that OurBigBook.com is a bit like: <a href="https://roamresearch.com/">roamresearch.com/</a> and other graph knowledges. I feel ashemed for not having seen this software and its alternatives before. I was so focused on the "book aspect" of it that I didn't search much in there. I couldn't find an immediate project killer superset from the options in that area, but maybe one exists. We'll see.</div><div class="h" id="misc-tech"><div class="notnav"><h2><a href="5/misc-tech"><span class="number">2. </span>Misc tech</a></h2><span class="hover-meta"> <a class="split" href="5/misc-tech"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Ciro's Edict #5</a><a href="#_toc/misc-tech" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/misc-tech"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="h" id="china-front"><div class="notnav"><h2><a href="5/china-front"><span class="number">3. </span>China front</a></h2><span class="hover-meta"> <a class="split" href="5/china-front"></a><span class="metrics"><span class="wcntr"> Words: 11</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Ciro's Edict #5</a><a href="#_toc/china-front" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/china-front"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_58">The <a href="../../china">China</a> front was of course the <a href="../../continent#russia">Russia</a> front this time: <a href="https://stackoverflow.com/users/895245">stackoverflow.com/users/895245</a> (<a href="https://web.archive.org/web/20220322230513/https://stackoverflow.com/users/895245/ciro-santilli-%D0%9F%D1%83%D1%82%D0%BB%D0%B5%D1%80-%D0%9A%D0%B0%D0%BF%D1%83%D1%82-%E5%85%AD%E5%9B%9B%E4%BA%8B">web.archive.org/web/20220322230513/https://stackoverflow.com/users/895245/ciro-santilli-Путлер-Капут-六四事</a>)</div><div class="h" id="not-work"><div class="notnav"><h2><a href="5/not-work"><span class="number">4. </span>Not work</a></h2><span class="hover-meta"> <a class="split" href="5/not-work"></a><span class="metrics"><span class="wcntr"> Words: 19</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Ciro's Edict #5</a><a href="#_toc/not-work" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/sponsor/updates/5/not-work"><img src="../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_59">I read <a href="../../artificial-intelligence#human-compatible">Human Compatible by Stuart J. Russell (2019)</a>. Some <a href="../../artificial-intelligence#ai-safety">AI safety</a> people were actually giving out free copies after a talk, can you believe it! <a href="../../literature#good-book">Good book</a>.</div><h2 id="_ancestors"><a href="#_ancestors"><span class="fa-solid-900 icon"></span> Ancestors <span class="meta">(4)</span></a></h2><div class="list"><ol><li><a href="../../ciro-santilli#sponsor-updates">Sponsor updates</a></li><li><a href="../../ciro-santilli#update-from-ciro-santilli">Update from Ciro Santilli</a></li><li><a href="../../ciro-santilli">Ciro Santilli</a></li><li><a href="../.."><span title="Home" class="fa-solid-900 icon"></span> Home</a></li></ol></div>
</main>
<footer>
<div>Powered by <a href="https://docs.ourbigbook.com">OurBigBook</a></div>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/issues">Suggestions and corrections</a></div>
<div><a href="../../contact">Contact Ciro Santilli</a></div>
<div><a href="../../_dir">Website source code</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io">Website source code on GitHub</a></div>
<div><a href="../../_file/sponsor/updates/5.bigb">Source code for this page: sponsor/updates/5.bigb</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/blob/f7dac29d5224c15015eee520ccee15a3adb07b98/sponsor/updates/5.bigb">Source code for this page on GitHub</a></div>
<div>Cite with: <a href="https://zenodo.org/badge/latestdoi/16453261">this DOI</a></div>
<div><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_left_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye"></div>
</footer>
<script>
window.ourbigbook_split_headers = true;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "sponsor/updates/5/";
</script>
<script src="../../_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script><script src="../../_raw/main.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47867706-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEE2HEJW9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DEE2HEJW9X');
</script>
<script src="https://giscus.app/client.js"
        data-repo="cirosantilli/cirosantilli.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQ1MzI2MQ=="
        data-category="giscus"
        data-category-id="DIC_kwDOAPsOjc4CZ6zZ"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</body>
</html>

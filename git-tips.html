<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Git tips - Ciro Santilli</title>
<meta property="og:title" content="Git tips - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://raw.githubusercontent.com/cirosantilli/media/master/gitk.png">
<meta property="og:url" content="https://cirosantilli.com/git-tips">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="canonical" href="https://ourbigbook.com/cirosantilli/git-tips">
<style>@import "_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="_raw/main.css">
<link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
</head>
<body>
<header>
<div class="brand-group">
<a href="." class="brand"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_right_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye">Ciro Santilli</a>
<a href="https://ourbigbook.com/cirosantilli"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ourbigbook-logo-v1.svg" loading="lazy" alt="OurBigBook logo">OurBigBook.com</a>
<a class="font-awesome-container" href="https://stackoverflow.com/users/895245"><i class="fab fa-stack-overflow fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://github.com/cirosantilli"><i class="fab fa-github fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.linkedin.com/in/cirosantilli"><i class="fab fa-linkedin fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.youtube.com/c/CiroSantilli"><i class="fab fa-youtube fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://twitter.com/cirosantilli"><i class="fab fa-twitter fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.zhihu.com/people/cirosantilli/activities"><i class="fab fa-zhihu fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.weibo.com/p/1005055601627311"><i class="fab fa-weibo fa-fw icon"></i></a>
<a href="sponsor"><span class="icon">$¬£</span>&nbsp;Sponsor</a>
<a href="https://github.com/cirosantilli/china-dictatorship"><span class="icon">‰∏≠ÂõΩ</span>Áã¨Ë£ÅÁªüÊ≤ª&nbsp;China Dictatorship Êñ∞ÁñÜÊîπÈÄ†‰∏≠ÂøÉ„ÄÅÂÖ≠Âõõ‰∫ã‰ª∂„ÄÅÊ≥ïËΩÆÂäü„ÄÅÈÉùÊµ∑‰∏ú„ÄÅ709Â§ßÊäìÊçï„ÄÅ2015Â∑¥ÊãøÈ©¨Êñá‰ª∂ ÈÇìÂÆ∂Ë¥µ„ÄÅ‰ΩéÁ´Ø‰∫∫Âè£„ÄÅË•øËóèÈ™ö‰π±</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="git-tips"><div class="notnav"><h1><a href="git-tips-split">Git tips</a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav ancestors"><a  href="#_ancestors">&nbsp;...</a><a href="technology#information-technology"> Information technology</a><a href="computer"> Computer</a><a href="software"> Software</a><a href="software#version-control"> Version control</a><a href="software#list-of-version-control-systems"> List of version control systems</a><a href="software#git"> Git</a></div><div class="nav"><a href="#_toc" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a><a class="split" href="git-tips-split"></a><span class="metrics"><span class="wcntr"> Words: 2k</span><span class="dcnt"> Articles: 20</span></span></div></nav></div><div class="p" id="_1">This is a quick presentation that goes over some of the most common difficulties people find with <a href="software#git">Git</a>.</div><div class="toc-container" id="_toc"><ul><li class="has-child toplevel"><div class="title-div"><div class="arrow"><div></div></div><span class="not-arrow"><a class="title toc" href="#_toc"> Table of contents</a><input class="search" placeholder="üîç Search. Shortcut: / (slash)"><span class="hover-metadata"><span class="metrics"><span class="wcntr"> 2k</span><span class="dcnt"> 20</span></span></span></span></div><ul><li><div id="_toc/understand-the-commit-tree"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#understand-the-commit-tree">Understand the commit tree</a><span class="hover-metadata"><a href="#_toc" class="u"> Git tips</a><span class="metrics"><span class="wcntr"> 27</span></span></span></span></div></li><li><div id="_toc/it-s-not-a-tree-it-s-actually-a-dag"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#it-s-not-a-tree-it-s-actually-a-dag">It's not a tree, it's actually a DAG</a><span class="hover-metadata"><a href="#_toc" class="u"> Git tips</a><span class="metrics"><span class="wcntr"> 162</span></span></span></span></div></li><li><div id="_toc/why-is-git-a-dag"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#why-is-git-a-dag">Why is Git a DAG?</a><span class="hover-metadata"><a href="#_toc" class="u"> Git tips</a><span class="metrics"><span class="wcntr"> 44</span></span></span></span></div></li><li><div id="_toc/linear-history-vs-branching"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#linear-history-vs-branching">Linear history vs branching</a><span class="hover-metadata"><a href="#_toc" class="u"> Git tips</a><span class="metrics"><span class="wcntr"> 140</span></span></span></span></div></li><li class="has-child"><div id="_toc/how-to-visualize-the-commit-tree"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#how-to-visualize-the-commit-tree">How to visualize the commit tree</a><span class="hover-metadata"><a href="#_toc" class="u"> Git tips</a><span class="metrics"><span class="wcntr"> 229</span><span class="dcnt"> 2</span></span></span></span></div><ul><li><div id="_toc/gitk"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#gitk">gitk</a><span class="hover-metadata"><a href="#_toc/how-to-visualize-the-commit-tree" class="u"> How to visualize the commit tree</a><span class="metrics"><span class="wcntr"> 58</span></span></span></span></div></li><li><div id="_toc/git-log-graph"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#git-log-graph"><code>git log --graph</code></a><span class="hover-metadata"><a href="#_toc/how-to-visualize-the-commit-tree" class="u"> How to visualize the commit tree</a><span class="metrics"><span class="wcntr"> 99</span></span></span></span></div></li></ul><li class="has-child"><div id="_toc/how-to-modify-the-commit-tree"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#how-to-modify-the-commit-tree">How to modify the commit tree</a><span class="hover-metadata"><a href="#_toc" class="u"> Git tips</a><span class="metrics"><span class="wcntr"> 214</span><span class="dcnt"> 4</span></span></span></span></div><ul><li class="has-child"><div id="_toc/git-rebase-101"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#git-rebase-101">git rebase 101</a><span class="hover-metadata"><a href="#_toc/how-to-modify-the-commit-tree" class="u"> How to modify the commit tree</a><span class="metrics"><span class="wcntr"> 188</span><span class="dcnt"> 3</span></span></span></span></div><ul><li><div id="_toc/move-your-branch-on-top-of-newest-master"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#move-your-branch-on-top-of-newest-master">Move your branch on top of newest master</a><span class="hover-metadata"><a href="#_toc/git-rebase-101" class="u"> git rebase 101</a><span class="metrics"><span class="wcntr"> 42</span></span></span></span></div></li><li><div id="_toc/modify-contents-of-an-old-commit-in-your-branch"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#modify-contents-of-an-old-commit-in-your-branch">Modify contents of an old commit in your branch</a><span class="hover-metadata"><a href="#_toc/git-rebase-101" class="u"> git rebase 101</a><span class="metrics"><span class="wcntr"> 85</span></span></span></span></div></li><li><div id="_toc/merge-two-or-more-commits-into-one"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#merge-two-or-more-commits-into-one">Merge two or more commits into one</a><span class="hover-metadata"><a href="#_toc/git-rebase-101" class="u"> git rebase 101</a><span class="metrics"><span class="wcntr"> 61</span></span></span></span></div></li></ul></li></ul><li><div id="_toc/oh-but-there-are-2-trees-local-and-remote"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#oh-but-there-are-2-trees-local-and-remote">Oh, but there are 2 trees: local and remote</a><span class="hover-metadata"><a href="#_toc" class="u"> Git tips</a><span class="metrics"><span class="wcntr"> 80</span></span></span></span></div></li><li class="has-child"><div id="_toc/merge-conflicts"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#merge-conflicts">Merge conflicts</a><span class="hover-metadata"><a href="#_toc" class="u"> Git tips</a><span class="metrics"><span class="wcntr"> 702</span><span class="dcnt"> 6</span></span></span></span></div><ul><li><div id="_toc/git-rebase-moves-commits-one-by-one"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#git-rebase-moves-commits-one-by-one">git rebase moves commits one by one</a><span class="hover-metadata"><a href="#_toc/merge-conflicts" class="u"> Merge conflicts</a><span class="metrics"><span class="wcntr"> 132</span></span></span></span></div></li><li><div id="_toc/the-key-to-solve-conflicts-see-the-two-conflicting-diffs"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#the-key-to-solve-conflicts-see-the-two-conflicting-diffs">The key to solve conflicts: see the two conflicting diffs</a><span class="hover-metadata"><a href="#_toc/merge-conflicts" class="u"> Merge conflicts</a><span class="metrics"><span class="wcntr"> 70</span></span></span></span></div></li><li class="has-child"><div id="_toc/conflict-resolution-tool"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#conflict-resolution-tool">Conflict resolution tool</a><span class="hover-metadata"><a href="#_toc/merge-conflicts" class="u"> Merge conflicts</a><span class="metrics"><span class="wcntr"> 500</span><span class="dcnt"> 3</span></span></span></span></div><ul><li><div id="_toc/diff3"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#diff3"><code>diff3</code></a><span class="hover-metadata"><a href="#_toc/conflict-resolution-tool" class="u"> Conflict resolution tool</a><span class="metrics"><span class="wcntr"> 314</span></span></span></span></div></li><li><div id="_toc/git-mergetool-with-meld-or-kdiff3"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#git-mergetool-with-meld-or-kdiff3"><code>git mergetool</code> with <code>meld</code> or <code>kdiff3</code></a><span class="hover-metadata"><a href="#_toc/conflict-resolution-tool" class="u"> Conflict resolution tool</a><span class="metrics"><span class="wcntr"> 150</span></span></span></span></div></li><li><div id="_toc/but-which-commit-from-master-did-we-conflict-with-exactly"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#but-which-commit-from-master-did-we-conflict-with-exactly">But which commit from master did we conflict with exactly?</a><span class="hover-metadata"><a href="#_toc/conflict-resolution-tool" class="u"> Conflict resolution tool</a><span class="metrics"><span class="wcntr"> 36</span></span></span></span></div></li></ul></li></ul></li></ul></li></ul></div><div class="h" id="understand-the-commit-tree"><div class="notnav"><h2><a href="git-tips/understand-the-commit-tree">Understand the commit tree</a></h2><span class="hover-meta"> <a class="split" href="git-tips/understand-the-commit-tree"></a><span class="metrics"><span class="wcntr"> Words: 27</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Git tips</a><a href="#_toc/understand-the-commit-tree" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/understand-the-commit-tree"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_2">This is the most important thing to understand Git!</div><div class="p" id="_3">You must:<div class="list"><ul id="_4"><li id="_5">be able to visualize the commit tree</li><li id="_6">understand how each git command modifies the commit DAG</li></ul></div></div><div class="h" id="it-s-not-a-tree-it-s-actually-a-dag"><div class="notnav"><h2><a href="git-tips/it-s-not-a-tree-it-s-actually-a-dag">It's not a tree, it's actually a DAG <span class="meta">(Directed Acyclic Graph)</span></a></h2><span class="hover-meta"> <a class="split" href="git-tips/it-s-not-a-tree-it-s-actually-a-dag"></a><span class="metrics"><span class="wcntr"> Words: 162</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Git tips</a><a href="#_toc/it-s-not-a-tree-it-s-actually-a-dag" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/it-s-not-a-tree-it-s-actually-a-dag"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_8">Every <a href="mathematics#tree-data-structure">tree</a> is a <a href="mathematics#directed-acyclic-graph">directed acyclic graph</a>.</div><div class="p" id="_9">But not every <a href="mathematics#directed-acyclic-graph">directed acyclic graph</a> is a tree.</div><div class="p" id="_10">Example of a tree (and therefore also a DAG):<div class="code" id="_11"><div><pre><code>5
|
4 7
| |
3 6
|/
2
|
1</code></pre></div></div>Convention in this presentation: arrows implicitly point up, just like in a <code>git log</code>, i.e.:<div class="list"><ul id="_12"><li id="_13">1 is parent of 2</li><li id="_14">2 is parent of 3 and 6</li><li id="_15">3 is parent of 4</li></ul></div>and so on.</div><div class="p" id="_16">Example of a DAG that is not a tree:<div class="code" id="_17"><div><pre><code>7
|\
4 6
| |
3 5
|/
2
|
1</code></pre></div></div>This is not a tree because there are two ways to reach 7:<div class="list"><ul id="_18"><li id="_19">2, 3, 4, 7</li><li id="_20">2, 5, 6, 7</li></ul></div></div><div class="p" id="_21">But we often say "tree" intead of "DAG" in the context of Git because DAG sounds ugly.</div><div class="p" id="_22">Example of a graph that is not a DAG:<div class="code" id="_23"><div><pre><code>6
^
|
3-&gt;4
^  |
|  v
2&lt;-5
^
|
1</code></pre></div></div>This one is not acyclic because there is a cycle 2, 3, 4, 5, 2.</div><div class="h" id="why-is-git-a-dag"><div class="notnav"><h2><a href="git-tips/why-is-git-a-dag">Why is Git a DAG?</a></h2><span class="hover-meta"> <a class="split" href="git-tips/why-is-git-a-dag"></a><span class="metrics"><span class="wcntr"> Words: 44</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Git tips</a><a href="#_toc/why-is-git-a-dag" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/why-is-git-a-dag"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_24">Because a Git commit can have more than 1 parent due to merge commits when you do:<div class="code" id="_25"><div><pre><code>git merge</code></pre></div></div></div><div class="p" id="_26">It can even have more than 2, there's no limit. Although that is not so common (with good reason, 2 is already one too many): <a href="https://softwareengineering.stackexchange.com/questions/314215/can-a-git-commit-have-more-than-2-parents/377903#377903">softwareengineering.stackexchange.com/questions/314215/can-a-git-commit-have-more-than-2-parents/377903#377903</a></div><div class="h" id="linear-history-vs-branching"><div class="notnav"><h2><a href="git-tips/linear-history-vs-branching">Linear history vs branching</a></h2><span class="hover-meta"> <a class="split" href="git-tips/linear-history-vs-branching"></a><span class="metrics"><span class="wcntr"> Words: 140</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Git tips</a><a href="#_toc/linear-history-vs-branching" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/linear-history-vs-branching"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_27">There are two ways to organize a project:<div class="list"><ul id="_28"><li id="_29">linear history</li><li id="_30">branched history: history with merge commits</li></ul></div></div><div class="p" id="_31">Some people like merges, but they are ugly and stupid. Rebase instead and keep linear history.</div><div class="p" id="_32">Linear history:<div class="code" id="_33"><div><pre><code>5 master
|
4
|
3
|
2
|
1 first commit</code></pre></div></div></div><div class="p" id="_34">Branched history:<div class="code" id="_35"><div><pre><code>7   master
|\
| \
6  \
|\  \
| |  |
3 4  5
| |  |
| /  /
|/  /
2  /
| /
1/  first commit</code></pre></div></div></div><div class="p" id="_36">Here commits 6 and 7 are the so called "merge commits":<div class="list"><ul id="_37"><li id="_38">they have multiple parents:<div class="list"><ul id="_39"><li id="_40">6 has parents 3 and 4</li><li id="_41">7 has parents 5 and 6</li></ul></div></li><li id="_42">they are useless and don't contain any real information</li></ul></div></div><div class="p" id="_43">Which type of tree do you think will be easier to understand and maintain?</div><div class="p" id="_44">????</div><div class="p" id="_45">????????????</div><div class="p" id="_46">You may disconnect now if you still like branched history.</div><div class="h" id="how-to-visualize-the-commit-tree"><div class="notnav"><h2><a href="git-tips/how-to-visualize-the-commit-tree">How to visualize the commit tree</a></h2><span class="hover-meta"> <a class="split" href="git-tips/how-to-visualize-the-commit-tree"></a><span class="metrics"><span class="wcntr"> Words: 229</span><span class="dcnt"> Articles: 2</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Git tips</a><a href="#_toc/how-to-visualize-the-commit-tree" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/how-to-visualize-the-commit-tree"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_47">Generate a minimal test repo. You should get in the habit of doing this to test stuff out.<div class="code" id="_48"><div><pre><code>#!/usr/bin/env bash

mkdir git-tips
cd git-tips
git init

for i in 1 2 3 4 5; do
  echo $i &gt; f
  git add f
  git commit -m $i
done

git checkout HEAD~2
git checkout -b my-feature

for i in 6 7; do
  echo $i &gt; f
  git add f
  git commit -m $i
done</code></pre></div></div></div><div class="h" id="gitk"><div class="notnav"><h3><a href="git-tips/gitk">gitk</a></h3><span class="hover-meta"> <a class="split" href="git-tips/gitk"></a><span class="metrics"><span class="wcntr"> Words: 58</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#how-to-visualize-the-commit-tree" class="u"> How to visualize the commit tree</a><a href="#_toc/gitk" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/gitk"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_49">For the newbs.</div><div class="p" id="_50">Slick? No. But <a href="#gitk">gitk</a> does the job, like any one of the other 100 billion free <a href="software#git-ui">Git UI</a> viewers out there</div><div class="code" id="_51"><div><pre><code>gitk master HEAD</code></pre></div></div><div class="figure"><figure id="_52"><div class="float-wrap"><a href="https://raw.githubusercontent.com/cirosantilli/media/master/gitk.png"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/gitk.png" loading="lazy" height="500" alt="https://raw.githubusercontent.com/cirosantilli/media/master/gitk.png"></a></div></figure></div><div class="p" id="_53">Many <a href="software#integrated-development-environment">IDEs</a> are also implementing this now (e.g. <a href="software#visual-studio-code">VS Code</a>, <a href="software#eclipse-ide">Eclipse</a>. Most free IDE GIt implementations are still crap, but that is the future, because you want to edit, view history, edit, view history, commit, edit.</div><div class="h" id="git-log-graph"><div class="notnav"><h3><a href="git-tips/git-log-graph"><code>git log --graph</code></a></h3><span class="hover-meta"> <a class="split" href="git-tips/git-log-graph"></a><span class="metrics"><span class="wcntr"> Words: 99</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#how-to-visualize-the-commit-tree" class="u"> How to visualize the commit tree</a><a href="#_toc/git-log-graph" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/git-log-graph"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_54">For the strong.</div><div class="code" id="_55"><div><pre><code>git log --abbrev-commit --decorate --graph --pretty=oneline master HEAD</code></pre></div></div><div class="p" id="_56">Output:<div class="code" id="_57"><div><pre><code>* b4ec057 (master) 5
* 0b37c1b 4
| * fbfbfe8 (HEAD -&gt; my-feature) 7
| * 7b0f59d 6
|/
* 661cfab 3
* 6d748a9 2
* c5f8a2c 1</code></pre></div></div></div><div class="p" id="_58">If we also add the <code>--simplify-by-decoration</code>, which you very often want want on a real repository with many commits:<div class="code" id="_59"><div><pre><code>* b4ec057 (master) 5
| * fbfbfe8 (HEAD -&gt; my-feature) 7
|/
* c5f8a2c 1</code></pre></div></div>As we can see, this removes any commit that is neither:<div class="list"><ul id="_60"><li id="_61">under a branch or tag</li><li id="_62">at the intersection of too branches or tags</li></ul></div></div><div class="h" id="how-to-modify-the-commit-tree"><div class="notnav"><h2><a href="git-tips/how-to-modify-the-commit-tree">How to modify the commit tree</a></h2><span class="hover-meta"> <a class="split" href="git-tips/how-to-modify-the-commit-tree"></a><span class="metrics"><span class="wcntr"> Words: 214</span><span class="dcnt"> Articles: 4</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Git tips</a><a href="#_toc/how-to-modify-the-commit-tree" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/how-to-modify-the-commit-tree"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_63">Option 1) <code>git commit</code>. Doh!!!</div><div class="p" id="_64">Option 2) <code>git rebase</code>. Basically allows you to do arbitrary modifications to the tree. The most important ones are:</div><div class="h" id="git-rebase-101"><div class="notnav"><h3><a href="git-tips/git-rebase-101">git rebase 101</a></h3><span class="hover-meta"> <a class="split" href="git-tips/git-rebase-101"></a><span class="metrics"><span class="wcntr"> Words: 188</span><span class="dcnt"> Articles: 3</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#how-to-modify-the-commit-tree" class="u"> How to modify the commit tree</a><a href="#_toc/git-rebase-101" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/git-rebase-101"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="h" id="move-your-branch-on-top-of-newest-master"><div class="notnav"><h4><a href="git-tips/move-your-branch-on-top-of-newest-master">Move your branch on top of newest master</a></h4><span class="hover-meta"> <a class="split" href="git-tips/move-your-branch-on-top-of-newest-master"></a><span class="metrics"><span class="wcntr"> Words: 42</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#git-rebase-101" class="u"> git rebase 101</a><a href="#_toc/move-your-branch-on-top-of-newest-master" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/move-your-branch-on-top-of-newest-master"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_65">Before:<div class="code" id="_66"><div><pre><code>5 master
|
4 7 my-feature HEAD
| |
3 6
|/
2
|
1</code></pre></div></div></div><div class="p" id="_67">Action:<div class="code" id="_68"><div><pre><code>git rebase</code></pre></div></div></div><div class="p" id="_69">After:<div class="code" id="_70"><div><pre><code>7 my-feature HEAD
|
6
|
5 master
|
4
|
3
|
2
|
1</code></pre></div></div>Ready to push with linear history!</div><div class="h" id="modify-contents-of-an-old-commit-in-your-branch"><div class="notnav"><h4><a href="git-tips/modify-contents-of-an-old-commit-in-your-branch">Modify contents of an old commit in your branch</a></h4><span class="hover-meta"> <a class="split" href="git-tips/modify-contents-of-an-old-commit-in-your-branch"></a><span class="metrics"><span class="wcntr"> Words: 85</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#git-rebase-101" class="u"> git rebase 101</a><a href="#_toc/modify-contents-of-an-old-commit-in-your-branch" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/modify-contents-of-an-old-commit-in-your-branch"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_71">Before:<div class="code" id="_72"><div><pre><code>7 my-feature HEAD
|
6
|
5 master
|
4
|
3
|
2
|
1</code></pre></div></div></div><div class="p" id="_73">Oh, commit 6 was crap:<div class="code" id="_74"><div><pre><code>git rebase -i HEAD~2</code></pre></div></div></div><div class="p" id="_75">Mark <code>6</code> to be modified.</div><div class="p" id="_76">After:<div class="code" id="_77"><div><pre><code>7 my-feature HEAD
|
6v2
|
5 master
|
4
|
3
|
2
|
1</code></pre></div></div>Better now, ready to push.</div><div class="p" id="_78">Note: history changes change all commits SHAs. All parents are considereEven time is considered. So is commit message/author. And obviously file contents. So now commit "7" will actually have a different SHA.</div><div class="h" id="merge-two-or-more-commits-into-one"><div class="notnav"><h4><a href="git-tips/merge-two-or-more-commits-into-one">Merge two or more commits into one</a></h4><span class="hover-meta"> <a class="split" href="git-tips/merge-two-or-more-commits-into-one"></a><span class="metrics"><span class="wcntr"> Words: 61</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#git-rebase-101" class="u"> git rebase 101</a><a href="#_toc/merge-two-or-more-commits-into-one" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/merge-two-or-more-commits-into-one"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_79">Before<div class="code" id="_80"><div><pre><code>7 my-feature HEAD
|
6
|
5 master
|
4
|
3
|
2
|
1</code></pre></div></div></div><div class="p" id="_81">Oh, commit 6 was just a temporary step, should be put together with commit 7:<div class="code" id="_82"><div><pre><code>git rebase -i HEAD~2</code></pre></div></div></div><div class="p" id="_83">Mark <code>6</code> to be squashed.</div><div class="p" id="_84">After:<div class="code" id="_85"><div><pre><code>67 my-feature HEAD
|
5 master
|
4
|
3
|
2
|
1</code></pre></div></div>Better now, ready to push.</div><div class="h" id="oh-but-there-are-2-trees-local-and-remote"><div class="notnav"><h2><a href="git-tips/oh-but-there-are-2-trees-local-and-remote">Oh, but there are 2 trees: local and remote</a></h2><span class="hover-meta"> <a class="split" href="git-tips/oh-but-there-are-2-trees-local-and-remote"></a><span class="metrics"><span class="wcntr"> Words: 80</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Git tips</a><a href="#_toc/oh-but-there-are-2-trees-local-and-remote" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/oh-but-there-are-2-trees-local-and-remote"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_86">Oh but there are usually 2 trees: local and remote.</div><div class="p" id="_87">So you also have to learn how to observe and modify and sync with the remote tree!</div><div class="p" id="_88">But basically:<div class="code" id="_89"><div><pre><code>git fetch</code></pre></div></div>to update the remote tree. And then you can use it exactly like any other branch, except you prefix them with the remote (usually <code>origin/*</code>), e.g.:<div class="list"><ul id="_90"><li id="_91"><code>origin/master</code> is the latest fetch of the remote version of <code>master</code></li><li id="_92"><code>origin/my-feature</code>  is the latest fetch of the remote version of <code>my-feature</code></li></ul></div></div><div class="h" id="merge-conflicts"><div class="notnav"><h2><a href="git-tips/merge-conflicts">Merge conflicts</a></h2><span class="hover-meta"> <a class="split" href="git-tips/merge-conflicts"></a><span class="metrics"><span class="wcntr"> Words: 702</span><span class="dcnt"> Articles: 6</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> Git tips</a><a href="#_toc/merge-conflicts" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/merge-conflicts"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="h" id="git-rebase-moves-commits-one-by-one"><div class="notnav"><h3><a href="git-tips/git-rebase-moves-commits-one-by-one">git rebase moves commits one by one</a></h3><span class="hover-meta"> <a class="split" href="git-tips/git-rebase-moves-commits-one-by-one"></a><span class="metrics"><span class="wcntr"> Words: 132</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#merge-conflicts" class="u"> Merge conflicts</a><a href="#_toc/git-rebase-moves-commits-one-by-one" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/git-rebase-moves-commits-one-by-one"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_93">In order to solve conflicts, you just have to understand what commit you are trying to move where.</div><div class="p" id="_94">E.g. if from:<div class="code" id="_95"><div><pre><code>5 master
|
4 7 my-feature HEAD
| |
3 6
|/
2
|
1</code></pre></div></div>we do:<div class="code" id="_96"><div><pre><code>git rebase master</code></pre></div></div>what happens step by step is first 6 is moved on top of 5:<div class="code" id="_97"><div><pre><code>6on5 HEAD
|
5 master
|
4                 7 my-feature
|                 |
3                 6
|                 |
2-----------------+
|
1</code></pre></div></div>and then 7 is moved on top of the new 6:<div class="code" id="_98"><div><pre><code>7on5 HEAD
|
6on5
|
5 master
|
4                 7 my-feature
|                 |
3                 6
|                 |
2-----------------+
|
1</code></pre></div></div></div><div class="p" id="_99">All good? so OK, let's move the <code>my-feature</code> to the new 7:</div><div class="code" id="_100"><div><pre><code>7on5 my-feature HEAD
|
6on5
|
5 master
|
4
|
3
|
2
|
1</code></pre></div></div><div class="h" id="the-key-to-solve-conflicts-see-the-two-conflicting-diffs"><div class="notnav"><h3><a href="git-tips/the-key-to-solve-conflicts-see-the-two-conflicting-diffs">The key to solve conflicts: see the two conflicting diffs</a></h3><span class="hover-meta"> <a class="split" href="git-tips/the-key-to-solve-conflicts-see-the-two-conflicting-diffs"></a><span class="metrics"><span class="wcntr"> Words: 70</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#merge-conflicts" class="u"> Merge conflicts</a><a href="#_toc/the-key-to-solve-conflicts-see-the-two-conflicting-diffs" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/the-key-to-solve-conflicts-see-the-two-conflicting-diffs"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_101">The key to solve conflicts is:<div><blockquote id="_102">You have to understand what are the two commits that touched a given line (one from master, one from features), and then combine them somehow.</blockquote></div></div><div class="p" id="_103">Or in other words, at every rebase conflict we have something like:<div class="code" id="_104"><div><pre><code>master-commit    feature-commit
|                |
|                |
base-commit------+
|
|</code></pre></div></div>Therefore there are 2 diffs that you have to understand and reconcile:<div class="list"><ul id="_105"><li id="_106"><code>base-commit</code> to <code>master-commit</code></li><li id="_107"><code>base-commit</code> to <code>feature-commit</code></li></ul></div></div><div class="h" id="conflict-resolution-tool"><div class="notnav"><h3><a href="git-tips/conflict-resolution-tool">Conflict resolution tool</a></h3><span class="hover-meta"> <a class="split" href="git-tips/conflict-resolution-tool"></a><span class="metrics"><span class="wcntr"> Words: 500</span><span class="dcnt"> Articles: 3</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#merge-conflicts" class="u"> Merge conflicts</a><a href="#_toc/conflict-resolution-tool" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/conflict-resolution-tool"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="h" id="diff3"><div class="notnav"><h4><a href="git-tips/diff3"><code>diff3</code></a></h4><span class="hover-meta"> <a class="split" href="git-tips/diff3"></a><span class="metrics"><span class="wcntr"> Words: 314</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#conflict-resolution-tool" class="u"> Conflict resolution tool</a><a href="#_toc/diff3" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/diff3"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_108"><code>diff3</code> conflict is basically what you always want to see, either by setting it as the default as per <a href="https://stackoverflow.com/questions/27417656/should-diff3-be-default-conflictstyle-on-git">stackoverflow.com/questions/27417656/should-diff3-be-default-conflictstyle-on-git</a>:<div class="code" id="_109"><div><pre><code>git config --global merge.conflictstyle diff3</code></pre></div></div>or as a one off:<div class="code" id="_110"><div><pre><code>git checkout --conflict=diff3</code></pre></div></div></div><div class="p" id="_111">With this, conflicts now show up as:<div class="code" id="_112"><div><pre><code>++&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
 +5
++||||||| parent of 7b0f59d (6)
++3
++=======
+ 6
++&gt;&gt;&gt;&gt;&gt;&gt;&gt; 7b0f59d (6)</code></pre></div></div><code>7b0f59d</code> is the <a href="computer-science#sha-2">SHA-2</a> of commit 6.</div><div class="p" id="_113">instead of the inferior default:<div class="code" id="_114"><div><pre><code>++&lt;&lt;&lt;&lt;&lt;&lt;&lt; ours
 +5
++=======
+ 6
++&gt;&gt;&gt;&gt;&gt;&gt;&gt; theirs</code></pre></div></div></div><div class="p" id="_115">We can also observe the current tree state during resolution:<div class="code" id="_116"><div><pre><code>* b4ec057 (HEAD, master) 5
* 0b37c1b 4
| * fbfbfe8 (my-feature) 7
| * 7b0f59d 6
|/
* 661cfab 3
* 6d748a9 2
* c5f8a2c 1</code></pre></div></div>so we understand that we are now at 5 and that we are trying to apply our commit <code>6</code></div><div class="p" id="_117">So it is much clearer what is happening:<div class="list"><ul id="_118"><li id="_119">master changed the code from <code>3</code> to <code>5</code></li><li id="_120">our feature changed the code from <code>3</code> to <code>6</code></li></ul></div>and so now we have to decide what the new code is that will put both of these together.</div><div class="p" id="_121">Let's say we decide it is <code>5 + 6 = 11</code> and continue rebasing:<div class="code" id="_122"><div><pre><code>git add .
git rebase --continue</code></pre></div></div></div><div class="p" id="_123">We now reach:<div class="code" id="_124"><div><pre><code>++&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
 +11
++||||||| parent of fbfbfe8 (7)
++6
++=======
+ 7
++&gt;&gt;&gt;&gt;&gt;&gt;&gt; fbfbfe8 (7)</code></pre></div></div>and the tree looks like:<div class="code" id="_125"><div><pre><code>* ca7f7ff (HEAD) 6
* b4ec057 (master) 5
* 0b37c1b 4
| * fbfbfe8 (my-feature) 7
| * 7b0f59d 6
|/
* 661cfab 3
* 6d748a9 2
* c5f8a2c 1</code></pre></div></div>So we understand that:<div class="list"><ul id="_126"><li id="_127">after the previous step we added commit 6 on top of 5</li><li id="_128">now we are adding 7 on top of the new 6 (which we decided would contain <code>11</code>)</li></ul></div>and after resolving that one we now reach:<div class="code" id="_129"><div><pre><code>* e1aaf20 (HEAD -&gt; my-feature) 7
* ca7f7ff 6
* b4ec057 (master) 5
* 0b37c1b 4
* 661cfab 3
* 6d748a9 2
* c5f8a2c 1</code></pre></div></div></div><div class="h" id="git-mergetool-with-meld-or-kdiff3"><div class="notnav"><h4><a href="git-tips/git-mergetool-with-meld-or-kdiff3"><code>git mergetool</code> with <code>meld</code> or <code>kdiff3</code></a></h4><span class="hover-meta"> <a class="split" href="git-tips/git-mergetool-with-meld-or-kdiff3"></a><span class="metrics"><span class="wcntr"> Words: 150</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#conflict-resolution-tool" class="u"> Conflict resolution tool</a><a href="#_toc/git-mergetool-with-meld-or-kdiff3" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/git-mergetool-with-meld-or-kdiff3"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_130">These are good free newbie GUI options:<div class="code" id="_131"><div><pre><code>sudo apt install meld
git mergetool --tool meld

sudo apt install kdiff3
git mergetool --tool kdiff3</code></pre></div></div></div><div class="figure"><figure id="_132"><div class="float-wrap"><a href="https://raw.githubusercontent.com/cirosantilli/media/master/meld.png"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/meld.png" loading="lazy" height="500" alt="https://raw.githubusercontent.com/cirosantilli/media/master/meld.png"></a></div></figure></div><div class="figure"><figure id="_133"><div class="float-wrap"><a href="https://raw.githubusercontent.com/cirosantilli/media/master/kdiff3.png"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/kdiff3.png" loading="lazy" height="500" alt="https://raw.githubusercontent.com/cirosantilli/media/master/kdiff3.png"></a></div></figure></div><div class="p" id="_134">Let's make a more interesting conflict:</div><div class="p" id="_135">git-tips-2.sh<div class="code" id="_136"><div><pre><code>#!/usr/bin/env bash

set -eux

add() (
  rm -f f
  for i in `seq 10`; do
    printf "before $i\n\n" &gt;&gt; f
  done
  printf "conflict 1 $1\n\n" &gt;&gt; f
  for i in `seq 10`; do
    printf "middle $i\n\n" &gt;&gt; f
  done
  printf "conflict 2 $2\n\n" &gt;&gt; f
  for i in `seq 10`; do
    printf "after $i\n\n" &gt;&gt; f
  done
  git add f
)

rm -rf git-tips-2
mkdir git-tips-2
cd git-tips-2
git init

for i in 1 2 3; do
  add $i $i
  git commit -m $i
done

add 3 4
git commit -m 4

add 5 4
git commit -m 5

git checkout HEAD~2
git checkout -b my-feature

add 3 6
git commit -m 6

add 7 6
git commit -m 7</code></pre></div></div></div><div class="h" id="but-which-commit-from-master-did-we-conflict-with-exactly"><div class="notnav"><h4><a href="git-tips/but-which-commit-from-master-did-we-conflict-with-exactly">But which commit from master did we conflict with exactly?</a></h4><span class="hover-meta"> <a class="split" href="git-tips/but-which-commit-from-master-did-we-conflict-with-exactly"></a><span class="metrics"><span class="wcntr"> Words: 36</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#conflict-resolution-tool" class="u"> Conflict resolution tool</a><a href="#_toc/but-which-commit-from-master-did-we-conflict-with-exactly" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/git-tips/but-which-commit-from-master-did-we-conflict-with-exactly"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a></div></nav></div><div class="p" id="_137"><code>git rebase</code> does not tell you that, and that sucks.</div><div class="p" id="_138">We only know which commit from the feature branch caused the problem.</div><div class="p" id="_139">Generally we can guess or it is not needed, but <code>imerge</code> does look promising: <a href="https://stackoverflow.com/questions/18162930/how-can-i-find-out-which-git-commits-cause-conflicts">stackoverflow.com/questions/18162930/how-can-i-find-out-which-git-commits-cause-conflicts</a></div><h2 id="_ancestors"><a href="#_ancestors"><span class="fa-solid-900 icon">ÔÅ¢</span> Ancestors <span class="meta">(9)</span></a></h2><div class="list"><ol><li><a href="software#git">Git</a></li><li><a href="software#list-of-version-control-systems">List of version control systems</a></li><li><a href="software#version-control">Version control</a></li><li><a href="software">Software</a></li><li><a href="computer">Computer</a></li><li><a href="technology#information-technology">Information technology</a></li><li><a href="technology#area-of-technology">Area of technology</a></li><li><a href="technology">Technology</a></li><li><a href="."><span title="Home" class="fa-solid-900 icon">ÔÄï</span> Home</a></li></ol></div>
</main>
<footer>
<div>Powered by <a href="https://docs.ourbigbook.com">OurBigBook</a></div>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/issues">Suggestions and corrections</a></div>
<div><a href="contact">Contact Ciro Santilli</a></div>
<div><a href="_dir">Website source code</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io">Website source code on GitHub</a></div>
<div><a href="_file/git-tips.bigb">Source code for this page: git-tips.bigb</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/blob/a4d833d32a963800b7b90b69207f6802c6bb72d2/git-tips.bigb">Source code for this page on GitHub</a></div>
<div>Cite with: <a href="https://zenodo.org/badge/latestdoi/16453261">this DOI</a></div>
<div><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_left_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye"></div>
</footer>
<script>
window.ourbigbook_split_headers = true;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "git-tips/";
</script>
<script src="_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script><script src="_raw/main.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47867706-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEE2HEJW9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DEE2HEJW9X');
</script>
<script src="https://giscus.app/client.js"
        data-repo="cirosantilli/cirosantilli.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQ1MzI2MQ=="
        data-category="giscus"
        data-category-id="DIC_kwDOAPsOjc4CZ6zZ"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</body>
</html>

<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>js/matterjs/examples.html - Ciro Santilli</title>
<meta property="og:title" content="js/matterjs/examples.html - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
<meta property="og:url" content="https://cirosantilli.com/_file/js/matterjs/examples.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="canonical" href="https://ourbigbook.com/cirosantilli/_file/js/matterjs/examples.html">
<style>@import "../../../_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="../../../_raw/main.css">
<link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
</head>
<body>
<header>
<div class="brand-group">
<a href="../../../" class="brand"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_right_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye">Ciro Santilli</a>
<a href="https://ourbigbook.com/cirosantilli"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ourbigbook-logo-v1.svg" loading="lazy" alt="OurBigBook logo">OurBigBook.com</a>
<a class="font-awesome-container" href="https://stackoverflow.com/users/895245"><i class="fab fa-stack-overflow fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://github.com/cirosantilli"><i class="fab fa-github fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.linkedin.com/in/cirosantilli"><i class="fab fa-linkedin fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.youtube.com/c/CiroSantilli"><i class="fab fa-youtube fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://twitter.com/cirosantilli"><i class="fab fa-twitter fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.zhihu.com/people/cirosantilli/activities"><i class="fab fa-zhihu fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.weibo.com/p/1005055601627311"><i class="fab fa-weibo fa-fw icon"></i></a>
<a href="../../../sponsor"><span class="icon">$£</span>&nbsp;Sponsor</a>
<a href="https://github.com/cirosantilli/china-dictatorship"><span class="icon">中国</span>独裁统治&nbsp;China Dictatorship 新疆改造中心、六四事件、法轮功、郝海东、709大抓捕、2015巴拿马文件 邓家贵、低端人口、西藏骚乱</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="_file/js/matterjs/examples.html"><div class="notnav"><span class="file" title="This article is about a file." /><h1><a href="">js/matterjs/examples.html</a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav ancestors"><a  href="#_ancestors">&nbsp;...</a><a href="../../../programming-language#list-of-programming-languages"> List of programming languages</a><a href="../../../programming-language#javascript"> JavaScript</a><a href="../../../programming-language#javascript-software"> JavaScript software</a><a href="../../../programming-language#javascript-library"> JavaScript library</a><a href="../../../programming-language#javascript-physics-engine"> JavaScript physics engine</a><a href="../../../programming-language#matter-js"> Matter.js</a></div><div class="nav"><a href="https://ourbigbook.com/cirosantilli/_file/js/matterjs/examples.html"><img src="../../../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a><a class="nosplit" href="../../../programming-language#_file/js/matterjs/examples.html"></a><span class="metrics"><span class="wcntr"> Words: 3</span></span></div><div class="nav file"><b> <a href="../../../_dir">(root)</a> / <a href="../../../_dir/js">js</a> / <a href="../../../_dir/js/matterjs">matterjs</a> / <a href="../../../_raw/js/matterjs/examples.html">examples.html</a></b></div></nav></div><div class="p" id="_152">A multi-scenario demo.</div><div class="p"><b>js/matterjs/examples.html</b></div><div class="code"><div><pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;&lt;/title&gt;
&lt;script src="node_modules/matter-js/build/matter.js"&gt;&lt;/script&gt;
&lt;style&gt;
body {
  background-color: white;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 id="title"&gt;&lt;/h1&gt;
&lt;div id="demo"&gt;&lt;/div&gt;
&lt;div id="demo-doc"&gt;&lt;/div&gt;
&lt;div id="doc"&gt;
&lt;p&gt;Global controls: R: restart scenario | N: next scenario | P: previous scenario&lt;/p&gt;
&lt;p&gt;&lt;a href="http://cirosantilli.com/_file/js/matterjs/example.html"&gt;More information.&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id="demo-debug"&gt;&lt;/div&gt;
&lt;script&gt;
window.Matter || document.write('&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js" integrity="sha512-0z8URjGET6GWnS1xcgiLBZBzoaS8BNlKayfZyQNKz4IRp+s7CKXx0yz7Eco2+TcwoeMBa5KMwmTX7Kus7Fa5Uw==" crossorigin="anonymous" referrerpolicy="no-referrer"&gt;&lt;\/script&gt;')
&lt;/script&gt;
&lt;script&gt;
// Globals
const demoElement = document.getElementById('demo')
const demoDocElement = document.getElementById('demo-doc')
const demoDebugElement = document.getElementById('demo-debug')
const titleElement = document.getElementById('title')
let scenarioIdx = 0
let engine
let render
const idToScenario = {}
const keysDown = new Set()
document.addEventListener('keydown', e =&gt; {
  if (e.repeat) { return }
  if (e.code === "ArrowUp") {
  } else if (e.code === "ArrowDown") {
  } else if (e.code === "KeyN") {
    scenarioIdx = (scenarioIdx + 1) % scenarios.length
    ;[engine, render] = reset(demoElement, render, engine, scenarioIdx)
  } else if (e.code === "KeyR") {
    ;[engine, render] = reset(demoElement, render, engine, scenarioIdx)
  } else if (e.code === "KeyP") {
    scenarioIdx--
    if (scenarioIdx === -1) {
      scenarioIdx = scenarios.length - 1
    }
    ;[engine, render] = reset(demoElement, render, engine, scenarioIdx)
  } else {
    keysDown.add(e.code);
  }
})
document.addEventListener('keyup', e =&gt; {
  keysDown.delete(e.code)
})
const globalKeyHandlers = {
  KeyN: () =&gt; {
    scenarioIdx = (scenarioIdx + 1) % scenarios.length
    ;[engine, render] = reset(demoElement, render, engine, scenarioIdx)
  },
  KeyR: () =&gt; {
    ;[engine, render] = reset(demoElement, render, engine, scenarioIdx)
  },
  KeyP: () =&gt; {
    scenarioIdx--
    if (scenarioIdx === -1) {
      scenarioIdx = scenarios.length - 1
    }
    ;[engine, render] = reset(demoElement, render, engine, scenarioIdx)
  },
}


// Matter.js global singletons
const Engine = Matter.Engine
const Render = Matter.Render
const Runner = Matter.Runner
const Bodies = Matter.Bodies
const Composite = Matter.Composite
const World = Matter.World
const V = Matter.Vector

// Scenarios.
const scenarios = [
  {
    id: 'falling-boxes-1',
    scene: () =&gt; {
      return {
        setup: (engine, render) =&gt; {
          const boxA = Bodies.rectangle(400, 200, 80, 80)
          const boxB = Bodies.rectangle(450, 50, 80, 80)
          const ground = Bodies.rectangle(400, 610, 810, 60, { isStatic: true })
          Composite.add(engine.world, [boxA, boxB, ground])
        },
      }
    },
  },
  {
    id: 'falling-boxes-2',
    scene: () =&gt; {
      return {
        setup: (engine, render) =&gt; {
          const boxA = Bodies.rectangle(400, 50, 80, 80)
          const boxB = Bodies.rectangle(450, 200, 80, 80)
          const boxC = Bodies.rectangle(650, 200, 80, 80)
          const ground = Bodies.rectangle(400, 610, 810, 60, { isStatic: true })
          Composite.add(engine.world, [boxA, boxB, boxC, ground])
        }
      }
    },
  },
  {
    id: 'sprites',
    scene: () =&gt; {
      return {
        // https://stackoverflow.com/questions/22686917/matter-js-change-colors
        renderOpts: { wireframes: false },
        setup: (engine, render) =&gt; {
          // By default it loops over some default colors.
          const boxA = Bodies.rectangle(100, 200, 80, 80)
          const boxB = Bodies.rectangle(200, 200, 80, 80)

          const fixedColor = Bodies.rectangle(300, 200, 80, 80, {
            render: {
              fillStyle: 'green',
              strokeStyle: 'yellow',
              lineWidth: 10,
            },
          })

          const ciro = Bodies.rectangle(
            400, 200, 80, 80,
            {
              render: {
                sprite: {
                  texture: 'https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg',
                  // TODO set width/height exactly in pixels to make it more easily match the box?
                  // https://github.com/liabru/matter-js/issues/120
                  // https://stackoverflow.com/questions/30678438/matter-js-sprite-size
                  xScale: 80/400,
                  yScale: 80/400,
                }
              }
            }
          )
          const ground = Bodies.rectangle(400, 610, 810, 60, {
            isStatic: true,
            render: {
              fillStyle: 'brown',
            },
          })
          Composite.add(engine.world, [boxA, boxB, fixedColor, ciro, ground])
        },
      }
    },
  },
  {
    id: 'top-down-asdw-fixed-viewport',
    scene: () =&gt; {
      const w = 600
      const h = 600

      // Ciro
      const ciroMoveForce = 0.01
      const ciroScale = 0.1
      const ciroW = w * ciroScale
      const ciroH = h * ciroScale
      const ciro = Bodies.rectangle(
        w/2, h/2, ciroW, ciroH,
        {
          density: 0.001,
          friction: 0,
          frictionAir: 0.04,
          render: {
            sprite: {
              texture: 'https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg',
              xScale: ciroW/400,
              yScale: ciroH/400,
            }
          }
        }
      )

      // Stone
      const stoneR = w/40
      const stoneMap = new Map()
      function addStone(engine, retries=10) {
        for (let i = 0; i &lt; retries; i++) {
          const otherBodies = Composite.allBodies(engine.world)
          const newStone = Bodies.circle(
            Math.random() * w, Math.random() * h, stoneR,
            {
              render: { fillStyle: 'gray' },
            }
          )
          Composite.add(engine.world, [newStone])
          if (Matter.Query.collides(newStone, otherBodies).length) {
            Composite.remove(engine.world, newStone)
          } else {
            stoneMap.set(newStone, undefined)
            return newStone
          }
        }
      }

      // Bin
      const buttonR = w/20
      function makeButton(x, y) {
        return Bodies.circle(
          x, y, buttonR,
          {
            isStatic: true,
            render: { fillStyle: 'purple' },
          }
        )
      }
      const buttons = [
        makeButton(w/4, h/4),
        makeButton(3*w/4, 3*h/4),
      ]
      const buttonMap = new Map()
      for (const button of buttons) {
        buttonMap.set(button, { count: 0, })
      }

      // Wall
      const wallExtra = 0.1
      const wallOpts = {
        isStatic: true,
        render: { fillStyle: 'brown', },
      }

      demoDocElement.innerHTML = '&lt;p&gt;Controls: W: up | S: down | A: left | D: right | Mouse drag: move objects&lt;/p&gt;'

      return {
        afterRender: () =&gt; {
          const context = render.context
          context.font = "bold 24px verdana, sans-serif "
          context.textAlign = "center"
          context.textBaseline = "bottom"
          context.fillStyle = "#ffffff"
          context.fillText('Ciro', ciro.position.x, ciro.position.y - ciroH/2);
          for (const button of buttons) {
            context.fillText(`Bin ${buttonMap.get(button).count}`, button.position.x, button.position.y - buttonR)
          }
          for (const [stone, _] of stoneMap) {
            context.fillText('Stone', stone.position.x, stone.position.y - stoneR)
          }
        },
        beforeUpdate: () =&gt; {
          demoDebugElement.innerHTML = `&lt;p&gt;` +
            `x: ${ciro.position.x.toFixed(2)} | y: ${ciro.position.y.toFixed(2)}` +
            ` | vx: ${ciro.velocity.x.toFixed(2)} | vy: ${ciro.velocity.y.toFixed(2)}` +
            `&lt;/p&gt;`
        },
        // https://stackoverflow.com/questions/29466684/disabling-gravity-in-matter-js
        engineOpts: { gravity: { y: 0 } },
        keyHandlers: {
          KeyW: () =&gt; {
            Matter.Body.applyForce(ciro, {
              x: ciro.position.x,
              y: ciro.position.y
            }, { x: 0, y: -ciroMoveForce } )
          },
          KeyS: () =&gt; {
            Matter.Body.applyForce(ciro, {
              x: ciro.position.x,
              y: ciro.position.y
            }, { x: 0, y: ciroMoveForce } )
          },
          KeyA: () =&gt; {
            Matter.Body.applyForce(ciro, {
              x: ciro.position.x,
              y: ciro.position.y
            }, { x: -ciroMoveForce, y: 0 } )
          },
          KeyD: () =&gt; {
            Matter.Body.applyForce(ciro, {
              x: ciro.position.x,
              y: ciro.position.y
            }, { x: ciroMoveForce, y: 0 } )
          },
        },
        renderOpts: {
          height: w,
          width: h,
          wireframes: false,
        },
        setup: (engine, render) =&gt; {
          // Two things touch each other, e.g. something and a button.
          Matter.Events.on(engine, 'collisionStart', function(event) {
            const pairs = event.pairs
            for (let i = 0, j = pairs.length; i != j; ++i) {
              const pair = pairs[i]

              // Button collision.
              let button, stone
              if (buttonMap.has(pair.bodyA)) { button = pair.bodyA }
              if (buttonMap.has(pair.bodyB)) { button = pair.bodyB }
              if (stoneMap.has(pair.bodyA)) { stone = pair.bodyA }
              if (stoneMap.has(pair.bodyB)) { stone = pair.bodyB }
              if (button &amp;&amp; stone) {
                buttonMap.get(button).count++
                Composite.remove(engine.world, stone)
                stoneMap.delete(stone)
                addStone(engine)
              }
            }
          })
          Render.lookAt(render, {
            min: { x: 0, y: 0 },
            max: { x: w, y: h },
          })
          Composite.add(
            engine.world,
            [
              ciro,

              // Walls
              // N
              Bodies.rectangle(w/2, 0, w * (1 + wallExtra), h * wallExtra, wallOpts),
              // S
              Bodies.rectangle(w/2, h, w * (1 + wallExtra), h * wallExtra, wallOpts),
              // W
              Bodies.rectangle(0, h/2, w * wallExtra, h  * (1 + wallExtra), wallOpts),
              // E
              Bodies.rectangle(w, h/2, w * wallExtra, h  * (1 + wallExtra), wallOpts),
            ].concat(buttons)
          )
          for (let i = 0; i &lt; 4; i++) {
            addStone(engine)
          }

          // Add mouse control
          const mouse = Matter.Mouse.create(render.canvas)
          const mouseConstraint = Matter.MouseConstraint.create(engine, {
            mouse,
            constraint: {
              angularStiffness: 0,
              render: {
                visible: true
              }
            }
          })
          Composite.add(engine.world, mouseConstraint)
          render.mouse = mouse;
        },
      }
    },
  },
  {
    id: 'top-down-asdw-fps',
    scene: () =&gt; {
      // Viewport width/height.
      const w = 600
      const h = 600
      // World width/height.
      const ww = 6000
      const wh = 6000

      // Ciro
      const ciroMoveForce = 0.01
      const ciroTorque = 0.1
      const ciroScale = 0.1
      const ciroW = w * ciroScale
      const ciroH = h * ciroScale
      const ciro = Bodies.rectangle(
        w/2, h/2, ciroW, ciroH,
        {
          density: 0.001,
          friction: 0,
          frictionAir: 0.04,
          render: {
            sprite: {
              texture: 'https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg',
              xScale: ciroW/400,
              yScale: ciroH/400,
            }
          }
        }
      )

      // Stone
      const stoneR = w/40
      const stoneMap = new Map()
      function addStone(engine, retries=10) {
        for (let i = 0; i &lt; retries; i++) {
          const otherBodies = Composite.allBodies(engine.world)
          const newStone = Bodies.circle(
            Math.random() * ww, Math.random() * wh, stoneR,
            {
              render: { fillStyle: 'gray' },
            }
          )
          Composite.add(engine.world, [newStone])
          if (Matter.Query.collides(newStone, otherBodies).length) {
            Composite.remove(engine.world, newStone)
          } else {
            stoneMap.set(newStone, undefined)
            return newStone
          }
        }
      }

      // Wall
      const wallExtra = 0.1
      const wallOpts = {
        isStatic: true,
        render: { fillStyle: 'brown', },
      }

      demoDocElement.innerHTML = '&lt;p&gt;Controls: W: forward | S: backwards | A: strafe left | D: strafe right | Q: rotate left | E: rotate right | Mouse drag: move objects&lt;/p&gt;'

      Matter.Render.startViewTransform = function(render) {
        var boundsWidth = render.bounds.max.x - render.bounds.min.x,
            boundsHeight = render.bounds.max.y - render.bounds.min.y,
            boundsScaleX = boundsWidth / render.options.width,
            boundsScaleY = boundsHeight / render.options.height;

        // add lines:
        var w2 = render.canvas.width / 2;
        var h2 = render.canvas.height / 2;
        render.context.translate(w2, h2);
        render.context.rotate(-ciro.angle);
        render.context.translate(-w2, -h2);
        // /add lines.

        render.context.scale(1 / boundsScaleX, 1 / boundsScaleY);
        render.context.translate(-render.bounds.min.x, -render.bounds.min.y);
      }

      return {
        beforeRender: () =&gt; {
          Render.lookAt(render, {
            min: { x: ciro.position.x - w/2, y: ciro.position.y - h/2 },
            max: { x: ciro.position.x + w/2, y: ciro.position.y + h/2 },
          })
        },
        beforeUpdate: () =&gt; {
          demoDebugElement.innerHTML = `&lt;p&gt;` +
            `x: ${ciro.position.x.toFixed(2)} | y: ${ciro.position.y.toFixed(2)} | angle: ${((360 * ciro.angle/Math.PI) % 360).toFixed(2)}°` +
            ` | vx: ${ciro.velocity.x.toFixed(2)} | vy: ${ciro.velocity.y.toFixed(2)}` +
            `&lt;/p&gt;`
        },
        // https://stackoverflow.com/questions/29466684/disabling-gravity-in-matter-js
        engineOpts: { gravity: { y: 0 } },
        keyHandlers: {
          KeyW: () =&gt; {
            Matter.Body.applyForce(ciro, {
              x: ciro.position.x,
              y: ciro.position.y
            }, V.rotate({ x: 0, y: -ciroMoveForce }, ciro.angle) )
          },
          KeyS: () =&gt; {
            Matter.Body.applyForce(ciro, {
              x: ciro.position.x,
              y: ciro.position.y
            }, V.rotate({ x: 0, y: ciroMoveForce }, ciro.angle) )
          },
          KeyA: () =&gt; {
            Matter.Body.applyForce(ciro, {
              x: ciro.position.x,
              y: ciro.position.y
            }, V.rotate({ x: -ciroMoveForce, y: 0 }, ciro.angle) )
          },
          KeyD: () =&gt; {
            Matter.Body.applyForce(ciro, {
              x: ciro.position.x,
              y: ciro.position.y
            }, V.rotate({ x: ciroMoveForce, y: 0 }, ciro.angle) )
          },
          KeyQ: () =&gt; {
            ciro.torque = -ciroTorque
          },
          KeyE: () =&gt; {
            ciro.torque = ciroTorque
          },
        },
        renderOpts: {
          height: w,
          width: h,
          wireframes: false,
          showPerformance: true
        },
        setup: (engine, render) =&gt; {
          Composite.add(
            engine.world,
            [
              ciro,

              // Walls
              // N
              Bodies.rectangle(ww/2, 0, ww * (1 + wallExtra), wh * wallExtra, wallOpts),
              // S
              Bodies.rectangle(ww/2, wh, ww * (1 + wallExtra), wh * wallExtra, wallOpts),
              // W
              Bodies.rectangle( 0, wh/2, ww * wallExtra, wh  * (1 + wallExtra), wallOpts),
              // E
              Bodies.rectangle(ww, wh/2, ww * wallExtra, wh  * (1 + wallExtra), wallOpts),
            ]
          )
          const nStones = Math.floor(ww*wh/(50*stoneR*stoneR))
          console.log(`nStones = ${nStones}`);
          for (let i = 0; i &lt; nStones; i++) {
            addStone(engine)
          }

          // Add mouse control
          const mouse = Matter.Mouse.create(render.canvas)
          const mouseConstraint = Matter.MouseConstraint.create(engine, {
            mouse,
            constraint: {
              angularStiffness: 0,
              render: {
                visible: true
              }
            }
          })
          Composite.add(engine.world, mouseConstraint)
          render.mouse = mouse;
        },
      }
    },
  },
]
for (let i = 0; i &lt; scenarios.length; i++) {
  const scenario = scenarios[i]
  idToScenario[scenario.id] = scenario
  scenario.idx = i
}
if (window.location.hash) {
  const scenario = idToScenario[window.location.hash.substr(1)]
  if (scenario) {
    scenarioIdx = scenario.idx
  }
}

function run(element, scenarioIdx) {
  demoDocElement.innerHTML = ''

  const scenario = scenarios[scenarioIdx]
  const scene = scenario.scene()
  const engine = Engine.create(scene.engineOpts || {})
  const render = Render.create({
    element,
    engine,
    options: scene.renderOpts || {},
  })
  const title = `${scenarioIdx}: ${scenario.id} - Matter.js demo`
  window.location.hash = scenario.id
  titleElement.innerHTML = title
  document.title = title
  scene.setup(engine, render)
  Render.run(render)
  Runner.run(Runner.create(), engine)
  const keyHandlers = Object.assign({}, scene.keyHandlers || {}, globalKeyHandlers)
  const afterRender = scene.afterRender
  if (afterRender) {
    Matter.Events.on(render, 'afterRender', afterRender)
  }
  const beforeRender = scene.beforeRender
  if (beforeRender) {
    Matter.Events.on(render, 'beforeRender', beforeRender)
  }
  Matter.Events.on(engine, 'beforeUpdate', event =&gt; {
    scene.beforeUpdate?.()
    ;[...keysDown].forEach(k =&gt; {
      keyHandlers[k]?.();
    });
  });
  return [engine, render]
}

function reset(element, render, engine, scenarioIdx) {
  // https://github.com/liabru/matter-js/issues/564
  Render.stop(render)
  World.clear(engine.world)
  Engine.clear(engine)
  render.canvas.remove()
  render.canvas = null
  render.context = null
  render.textures = {}
  Matter.Events.off(engine, 'afterRender')
  Matter.Events.off(engine, 'beforeRender')
  Matter.Events.off(engine, 'beforeUpdate')
  // https://stackoverflow.com/questions/38237506/rotate-camera-in-matter-js/60267606#60267606
  Matter.Render.startViewTransform = function(render) {
      var boundsWidth = render.bounds.max.x - render.bounds.min.x,
          boundsHeight = render.bounds.max.y - render.bounds.min.y,
          boundsScaleX = boundsWidth / render.options.width,
          boundsScaleY = boundsHeight / render.options.height;

      // add lines:
      var w2 = render.canvas.width / 2;
      var h2 = render.canvas.height / 2;
      render.context.translate(w2, h2);
      render.context.rotate(0);
      render.context.translate(-w2, -h2);
      // /add lines.

      render.context.scale(1 / boundsScaleX, 1 / boundsScaleY);
      render.context.translate(-render.bounds.min.x, -render.bounds.min.y);
  };

  return run(element, scenarioIdx)
}
;[engine, render] = run(demoElement, scenarioIdx)
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div><h2 id="_ancestors"><a href="#_ancestors"><span class="fa-solid-900 icon"></span> Ancestors <span class="meta">(13)</span></a></h2><div class="list"><ol><li><a href="../../../programming-language#matter-js">Matter.js</a></li><li><a href="../../../programming-language#javascript-physics-engine">JavaScript physics engine</a></li><li><a href="../../../programming-language#javascript-library">JavaScript library</a></li><li><a href="../../../programming-language#javascript-software">JavaScript software</a></li><li><a href="../../../programming-language#javascript">JavaScript</a></li><li><a href="../../../programming-language#list-of-programming-languages">List of programming languages</a></li><li><a href="../../../programming-language">Programming language</a></li><li><a href="../../../software">Software</a></li><li><a href="../../../computer">Computer</a></li><li><a href="../../../technology#information-technology">Information technology</a></li><li><a href="../../../technology#area-of-technology">Area of technology</a></li><li><a href="../../../technology">Technology</a></li><li><a href="../../.."><span title="Home" class="fa-solid-900 icon"></span> Home</a></li></ol></div>
</main>
<footer>
<div>Powered by <a href="https://docs.ourbigbook.com">OurBigBook</a></div>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/issues">Suggestions and corrections</a></div>
<div><a href="../../../contact">Contact Ciro Santilli</a></div>
<div><a href="../../../_dir">Website source code</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io">Website source code on GitHub</a></div>
<div><a href="../../../_file/programming-language.bigb">Source code for this page: programming-language.bigb</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/blob/a4d833d32a963800b7b90b69207f6802c6bb72d2/programming-language.bigb">Source code for this page on GitHub</a></div>
<div>Cite with: <a href="https://zenodo.org/badge/latestdoi/16453261">this DOI</a></div>
<div><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_left_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye"></div>
</footer>
<script>
window.ourbigbook_split_headers = true;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "";
</script>
<script src="../../../_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script><script src="../../../_raw/main.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47867706-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEE2HEJW9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DEE2HEJW9X');
</script>
<script src="https://giscus.app/client.js"
        data-repo="cirosantilli/cirosantilli.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQ1MzI2MQ=="
        data-category="giscus"
        data-category-id="DIC_kwDOAPsOjc4CZ6zZ"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</body>
</html>

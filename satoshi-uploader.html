<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Satoshi uploader - Ciro Santilli</title>
<meta property="og:title" content="Satoshi uploader - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
<meta property="og:url" content="https://cirosantilli.com/satoshi-uploader">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="canonical" href="https://ourbigbook.com/cirosantilli/satoshi-uploader">
<style>@import "_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="_raw/main.css">
<link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
</head>
<body>
<header>
<div class="brand-group">
<a href="." class="brand"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_right_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye">Ciro Santilli</a>
<a href="https://ourbigbook.com/cirosantilli"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ourbigbook-logo-v1.svg" loading="lazy" alt="OurBigBook logo">OurBigBook.com</a>
<a class="font-awesome-container" href="https://stackoverflow.com/users/895245"><i class="fab fa-stack-overflow fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://github.com/cirosantilli"><i class="fab fa-github fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.linkedin.com/in/cirosantilli"><i class="fab fa-linkedin fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.youtube.com/c/CiroSantilli"><i class="fab fa-youtube fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://twitter.com/cirosantilli"><i class="fab fa-twitter fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.zhihu.com/people/cirosantilli/activities"><i class="fab fa-zhihu fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.weibo.com/p/1005055601627311"><i class="fab fa-weibo fa-fw icon"></i></a>
<a href="sponsor"><span class="icon">$¬£</span>&nbsp;Sponsor</a>
<a href="https://github.com/cirosantilli/china-dictatorship"><span class="icon">‰∏≠ÂõΩ</span>Áã¨Ë£ÅÁªüÊ≤ª&nbsp;China Dictatorship Êñ∞ÁñÜÊîπÈÄ†‰∏≠ÂøÉ„ÄÅÂÖ≠Âõõ‰∫ã‰ª∂„ÄÅÊ≥ïËΩÆÂäü„ÄÅÈÉùÊµ∑‰∏ú„ÄÅ709Â§ßÊäìÊçï„ÄÅ2015Â∑¥ÊãøÈ©¨Êñá‰ª∂ ÈÇìÂÆ∂Ë¥µ„ÄÅ‰ΩéÁ´Ø‰∫∫Âè£„ÄÅË•øËóèÈ™ö‰π±</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="satoshi-uploader"><div class="notnav"><h1><a href="">Satoshi uploader</a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav ancestors"><a  href="#_ancestors">&nbsp;...</a><a href="social-technology#money"> Money</a><a href="social-technology#blockchain"> Blockchain</a><a href="cryptocurrency"> Cryptocurrency</a><a href="cryptocurrency#list-of-cryptocurrencies"> List of cryptocurrencies</a><a href="cryptocurrency#bitcoin"> Bitcoin</a><a href="cryptocurrency#how-to-extract-data-from-the-bitcoin-blockchain"> How to extract data from the Bitcoin blockchain</a></div><div class="nav"><a href="#_toc" class="toc"></a><a href="https://ourbigbook.com/cirosantilli/satoshi-uploader"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a><span class="tags"> Tags: <a href="cryptocurrency#pay-to-fake-multisig">P2FMS</a></span><a class="nosplit" href="cryptocurrency#satoshi-uploader"></a><span class="metrics"><span class="wcntr"> Words: 588</span><span class="dcnt"> Articles: 1</span></span></div></nav></div><div class="p" id="_727">See also: <a href="https://bitcoin.stackexchange.com/questions/35959/how-is-the-whitepaper-decoded-from-the-blockchain-tx-with-1000x-m-of-n-multisi/105574#105574">bitcoin.stackexchange.com/questions/35959/how-is-the-whitepaper-decoded-from-the-blockchain-tx-with-1000x-m-of-n-multisi/105574#105574</a></div><div class="p" id="_728">By "Satoshi uploader" we mean the data upload script present in tx <a href="https://www.blockchain.com/btc/tx/4b72a223007eab8a951d43edc171befeabc7b5dca4213770c88e09ba5b936e17">4b72a223007eab8a951d43edc171befeabc7b5dca4213770c88e09ba5b936e17</a> of the <a href="cryptocurrency#bitcoin">Bitcoin blockchain</a>.</div><div class="p" id="_729">The uploader, and its accompanying downloader, are <a href="programming-language#python-programming-language">Python</a> programs stored in the blockchain itself. They are made to upload and download arbitrary data into the blockchain via RPC.</div><div class="p" id="_730">These scripts were notably used for: <a href="cool-data-embedded-in-the-bitcoin-blockchain#illegal-content-of-block-229k">illegal content of block 229k</a>. The script did not maintain its popularity much after this initial surge up loads, likely all done by the same user: there are very very few uploads done after block 229k with the Satoshi uploader.</div><div class="p" id="_731">Our choice of name as "Satoshi uploader" is copied from <a href="cool-data-embedded-in-the-bitcoin-blockchain#a-quantitative-analysis-of-the-impact-of-arbitrary-blockchain-content-on-bitcoin-by-matzutt-et-al-2018">A Quantitative Analysis of the Impact of Arbitrary Blockchain Content on Bitcoin by Matzutt et al. (2018)</a> because the scripts are Copyrighted Satoshi Nakamoto on the header comment, although as mentioned at <a href="cool-data-embedded-in-the-bitcoin-blockchain#hidden-surprises-in-the-bitcoin-blockchain-by-ken-shirriff-2014">Hidden surprises in the Bitcoin blockchain by Ken Shirriff (2014)</a> this feels very unlikely to be true.</div><div class="p" id="_732">A more convenient version of those scripts that can download directly from <a href="cryptocurrency#blockchain-info">blockchain.info</a> without the need for a full local node can be found at: <a href="https://github.com/cirosantilli/bitcoin-inscription-indexer/blob/master/download_tx_consts.py">github.com/cirosantilli/bitcoin-inscription-indexer/blob/master/download_tx_consts.py</a> by using the <code>--satoshi</code> option. E.g. with it you can download the uploader script with:<div class="code" id="_733"><div><pre><code>./download_tx_consts.py --satoshi 4b72a223007eab8a951d43edc171befeabc7b5dca4213770c88e09ba5b936e17
mv 4b72a223007eab8a951d43edc171befeabc7b5dca4213770c88e09ba5b936e17.bin uploader.py</code></pre></div></div></div><div class="p" id="_734">The scripts can be found in the blockchain at:<div class="list"><ul id="_735"><li id="_736"><div class="p" id="_737">uploader: tx 4b72a223007eab8a951d43edc171befeabc7b5dca4213770c88e09ba5b936e17 block 229991 reproduced at: <a href="https://gist.github.com/cirosantilli/ade4dde7c2f2f5020d792872681763e8">gist.github.com/cirosantilli/ade4dde7c2f2f5020d792872681763e8</a></div><div class="p" id="_738">The uploader <a href="https://gist.github.com/cirosantilli/ade4dde7c2f2f5020d792872681763e8#file-bitcoin-insertion-tool-py-L161">creates a standard Pay-to-PubkeyHash transaction</a> with a single output and data as a fake pubkey hash, and sends change to an address specified on the command line:<div class="code" id="_739"><div><pre><code>./bitcoinInsertionTool.py &lt;data&gt; &lt;change-addr&gt;</code></pre></div></div></div></li><li id="_740"><div class="p" id="_741">downloader: tx 6c53cd987119ef797d5adccd76241247988a0a5ef783572a9972e7371c5fb0cc block 229991 reproduced at <a href="https://gist.github.com/cirosantilli/e90bd2e6c3fab25a20898e61e3ab3e90">gist.github.com/cirosantilli/e90bd2e6c3fab25a20898e61e3ab3e90</a></div><div class="p" id="_742">The downloader just <a href="https://gist.github.com/shirriff/64f48fa09a61b56ffcf9#file-bitcoin-file-downloader-py-L32">strips all operands</a>, and keeps all data, notably where public key hashes would be normally put.</div></li></ul></div></div><div class="p" id="_743">The uploader script uses its own cumbersome data encoding format, which we call the "Satoshi uploader format". The is as follows:<div class="list"><ul id="_744"><li id="_745">ignore all script operands and constants less than 20 bytes (40 hex characters). And there are a lot of small operands, e.g. the uploader itself uses format <a href="https://www.blockchain.com/btc/tx/4b72a223007eab8a951d43edc171befeabc7b5dca4213770c88e09ba5b936e17">www.blockchain.com/btc/tx/4b72a223007eab8a951d43edc171befeabc7b5dca4213770c88e09ba5b936e17</a> has a <code>OP_1</code>, data, <code>OP_3</code>, <code>OP_CHECKMULTISIG</code> pattern on every output script, so the <code>OP_1</code> and <code>OP_3</code> are ignored. I.e., it is <a href="cryptocurrency#pay-to-fake-multisig">P2FMS</a>.</li><li id="_746">ignore the last output, which contains a real change transaction instead of arbitrary data. TODO why not just do what with the length instead?</li><li id="_747">the first 4 bytes are the payload length, the next 4 bytes a <a href="technology#crc-32">CRC-32</a> signature. The payload length is in particular useful because of possible granularity of transactions. But it is hard to understand why a CRC-32 is needed in the middle of the largest <a href="computer-science#merkle-tree">hash tree</a> ever created by human kind!!! It does however have the adavantage that it allows us to more uniquely identify which transactions use the format or not.</li></ul></div>This means that if we want to index certain file types encoded in this format, a good heuristic is to skip the first 9 bytes (4 size, 4 CRC, 1 <code>OP_1</code>) and look for file signatures.</div><div class="p" id="_748">Let's try out the downloader to download itself. First you have to be running a <a href="cryptocurrency#bitcoin-core">Bitcoin Core</a> server locally. Then, supposing <code>.bitcon/bitoin.conf</code> containing:<div class="code" id="_749"><div><pre><code>rpcuser=asdf
rpcpassword=qwer
server=1
txindex=1</code></pre></div></div>we run:<div class="code" id="_750"><div><pre><code>git clone git://github.com/jgarzik/python-bitcoinrpc.git
git -C python-bitcoinrpc checkout cdf43b41f982b4f811cd4ebfbc787ab2abf5c94a
wget https://gist.githubusercontent.com/shirriff/64f48fa09a61b56ffcf9/raw/ad1d2e041edc0fb7ef23402e64eeb92c045b5ef7/bitcoin-file-downloader.py
pip install python-bitcoinrpc==1.0
BTCRPCURL=http://asdf:qwer@127.0.0.1:8332 \
  PYTHONPATH="$(pwd)/python-bitcoinrpc:$PYTHONPATH" \
  python3 bitcoin-file-downloader.py \
  6c53cd987119ef797d5adccd76241247988a0a5ef783572a9972e7371c5fb0cc</code></pre></div></div>worked! The source of the downloader script is visible! Note that we had to wait for the sync of the entire blockchain to be fully finished for some reason for that to work.</div><div class="p" id="_751">Other known uploads in Satoshi format except from the first few:<div class="list"><ul id="_752"><li id="_753">tx 89248ecadd51ada613cf8bdf46c174c57842e51de4f99f4bbd8b8b34d3cb7792 block 344068 see <a href="art#ascii-art">ASCII art</a></li><li id="_754">tx 1ff17021495e4afb27f2f55cc1ef487c48e33bd5a472a4a68c56a84fc38871ec contains the ASCII text <code>e5a6f30ff7d43f96f61af05efaf96f869aa072b5a071f32a24b03702d1dcd2a6</code>. This number however is not a known transaction ID in the blockchain, and has no Google hits.</li></ul></div></div><div class="toc-container" id="_toc"><ul><li class="has-child toplevel"><div class="title-div"><div class="arrow"><div></div></div><span class="not-arrow"><a class="title toc" href="#_toc"> Table of contents</a><input class="search" placeholder="üîç Search. Shortcut: / (slash)"><span class="hover-metadata"><span class="metrics"><span class="wcntr"> 588</span><span class="dcnt"> 1</span></span></span></span></div><ul><li><div id="_toc/peter-todd-s-data-upload-scripts"><div class="arrow"><div></div></div><span class="not-arrow"><a href="cryptocurrency#peter-todd-s-data-upload-scripts">Peter Todd's data upload scripts</a><span class="hover-metadata"><a href="#_toc" class="u"> Satoshi uploader</a><span class="metrics"><span class="wcntr"> 24</span></span></span></span></div></li></ul></li></ul></div><h2 id="_ancestors"><a href="#_ancestors"><span class="fa-solid-900 icon">ÔÅ¢</span> Ancestors <span class="meta">(10)</span></a></h2><div class="list"><ol><li><a href="cryptocurrency#how-to-extract-data-from-the-bitcoin-blockchain">How to extract data from the Bitcoin blockchain</a></li><li><a href="cryptocurrency#bitcoin">Bitcoin</a></li><li><a href="cryptocurrency#list-of-cryptocurrencies">List of cryptocurrencies</a></li><li><a href="cryptocurrency">Cryptocurrency</a></li><li><a href="social-technology#blockchain">Blockchain</a></li><li><a href="social-technology#money">Money</a></li><li><a href="social-technology">Social technology</a></li><li><a href="technology#area-of-technology">Area of technology</a></li><li><a href="technology">Technology</a></li><li><a href="."><span title="Home" class="fa-solid-900 icon">ÔÄï</span> Home</a></li></ol></div><h2 id="_incoming-links"><a href="#_incoming-links"><span title="Incoming links" class="fa-solid-900 icon">ÔÅ†</span> Incoming links <span class="meta">(4)</span></a></h2><div class="list"><ul><li><a href="cryptocurrency#bitcoin-whitepaper">Bitcoin whitepaper</a></li><li><a href="cool-data-embedded-in-the-bitcoin-blockchain#a-quantitative-analysis-of-the-impact-of-arbitrary-blockchain-content-on-bitcoin-by-matzutt-et-al-2018">A Quantitative Analysis of the Impact of Arbitrary Blockchain Content on Bitcoin by Matzutt et al. (2018)</a></li><li><a href="cool-data-embedded-in-the-bitcoin-blockchain#atomsea-and-embii">AtomSea &amp; EMBII</a></li><li><a href="cool-data-embedded-in-the-bitcoin-blockchain#illegal-content-of-block-229k">Illegal content of block 229k</a></li></ul></div>
</main>
<footer>
<div>Powered by <a href="https://docs.ourbigbook.com">OurBigBook</a></div>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/issues">Suggestions and corrections</a></div>
<div><a href="contact">Contact Ciro Santilli</a></div>
<div><a href="_dir">Website source code</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io">Website source code on GitHub</a></div>
<div><a href="_file/cryptocurrency.bigb">Source code for this page: cryptocurrency.bigb</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/blob/a4d833d32a963800b7b90b69207f6802c6bb72d2/cryptocurrency.bigb">Source code for this page on GitHub</a></div>
<div>Cite with: <a href="https://zenodo.org/badge/latestdoi/16453261">this DOI</a></div>
<div><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_left_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye"></div>
</footer>
<script>
window.ourbigbook_split_headers = true;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "";
</script>
<script src="_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script><script src="_raw/main.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47867706-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEE2HEJW9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DEE2HEJW9X');
</script>
<script src="https://giscus.app/client.js"
        data-repo="cirosantilli/cirosantilli.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQ1MzI2MQ=="
        data-category="giscus"
        data-category-id="DIC_kwDOAPsOjc4CZ6zZ"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</body>
</html>

<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>Ciro Santilli's hardware / Lenovo ThinkPad P51 (2017) log - Ciro Santilli</title>
<meta property="og:title" content="Ciro Santilli's hardware / Lenovo ThinkPad P51 (2017) log - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
<meta property="og:url" content="https://cirosantilli.com/ciro-santilli-s-hardware/lenovo-thinkpad-p51-2017-log">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="canonical" href="https://ourbigbook.com/cirosantilli/ciro-santilli-s-hardware/lenovo-thinkpad-p51-2017-log">
<style>@import "../_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="../_raw/main.css">
<link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
</head>
<body>
<header>
<div class="brand-group">
<a href="../" class="brand"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_right_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye">Ciro Santilli</a>
<a href="https://ourbigbook.com/cirosantilli"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ourbigbook-logo-v1.svg" loading="lazy" alt="OurBigBook logo">OurBigBook.com</a>
<a class="font-awesome-container" href="https://stackoverflow.com/users/895245"><i class="fab fa-stack-overflow fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://github.com/cirosantilli"><i class="fab fa-github fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.linkedin.com/in/cirosantilli"><i class="fab fa-linkedin fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.youtube.com/c/CiroSantilli"><i class="fab fa-youtube fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://twitter.com/cirosantilli"><i class="fab fa-twitter fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.zhihu.com/people/cirosantilli/activities"><i class="fab fa-zhihu fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.weibo.com/p/1005055601627311"><i class="fab fa-weibo fa-fw icon"></i></a>
<a href="../sponsor"><span class="icon">$£</span>&nbsp;Sponsor</a>
<a href="https://github.com/cirosantilli/china-dictatorship"><span class="icon">中国</span>独裁统治&nbsp;China Dictatorship 新疆改造中心、六四事件、法轮功、郝海东、709大抓捕、2015巴拿马文件 邓家贵、低端人口、西藏骚乱</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="lenovo-thinkpad-p51-2017-log"><div class="notnav"><h1><a href="../ciro-santilli-s-hardware">Ciro Santilli's hardware</a><span class="meta"> / </span><a href="">Lenovo ThinkPad P51 (2017) log</a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav ancestors"><a href=".."><span title="Home" class="fa-solid-900 icon"></span> Home</a><a href="../ciro-santilli"> Ciro Santilli</a><a href="../ciro-santilli-s-hardware"> Ciro Santilli's hardware</a><a href="../ciro-santilli-s-hardware#computers"> Computers</a><a href="../ciro-santilli-s-hardware#laptop"> Laptop</a><a href="../ciro-santilli-s-hardware#lenovo-thinkpad-p51-2017"> Lenovo ThinkPad P51 (2017)</a></div><div class="nav"><a href="https://ourbigbook.com/cirosantilli/ciro-santilli-s-hardware/lenovo-thinkpad-p51-2017-log"><img src="../_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a><a class="nosplit" href="../ciro-santilli-s-hardware#lenovo-thinkpad-p51-2017-log"></a><span class="metrics"><span class="wcntr"> Words: 723</span></span></div></nav></div><div class="p" id="_385"><a href="https://cirosantilli.com/linux-kernel-module-cheat/#p51">cirosantilli.com/linux-kernel-module-cheat/#p51</a> (<a href="https://raw.githubusercontent.com/cirosantilli/linux-kernel-module-cheat/a0d6fa15a207cb40cd8ce090c77aa9b55d7605a6/README.adoc">permalink</a>)</div><div class="list"><ul id="_386"><li id="_387">battery life:<div class="list"><ul id="_388"><li id="_389">2023-04: on-browser streaming + light browsing on <a href="../systems-programming#ubuntu-22-10">Ubuntu 22.10</a>: about 2h45. Too low! Gotta try buying a new battery.</li></ul></div></li><li id="_390"><div class="p" id="_391">2022-01-04 updated firmward after noticing that <a href="../systems-programming#ubuntu-21-10-does-not-wake-up-from-suspend">ubuntu 21.10 does not wake up from suspend</a> seemed to happen every time when not connected to external power. <code>dmidecode</code> diff excerpt:<div class="code" id="_392"><div><pre><code> BIOS Information
        Vendor: LENOVO
-       Version: N1UET40W (1.14 )
-       Release Date: 09/28/2017
+       Version: N1UET71W (1.45 )
+       Release Date: 07/18/2018</code></pre></div></div>used the "Ubuntu Software" GUI as mentioned at: <a href="https://support.lenovo.com/gb/en/solutions/ht510810-how-to-do-software-updates-linux">support.lenovo.com/gb/en/solutions/ht510810-how-to-do-software-updates-linux</a>. Kudos for making this accessible to newbs.</div><div class="p" id="_393">After doing that, another update became available to: 0.1.56, clicked it and was much faster than the previous one, and didn't auto reboot. After manual reboot, <code>dmidecode</code> diffed again:<div class="code" id="_394"><div><pre><code> BIOS Information
        Vendor: LENOVO
-       Version: N1UET71W (1.45 )
-       Release Date: 07/18/2018
+       Version: N1UET82W (1.56 )
+       Release Date: 08/12/2021</code></pre></div></div>plus a bunch of other lines.</div></li><li id="_395"><div class="p" id="_396">2021-06-05 upgraded to <a href="../systems-programming#ubuntu">Ubuntu</a> 21.04 with a clean install from an ISO. Selected<div class="list"><ul id="_397"><li id="_398">"Minimal installation"</li><li id="_399">"Erase disk and install Ubuntu". Notably, this erased the <a href="../microsoft#microsoft-windows">Microsoft Windows</a> that came with the computer and was never used not even once</li><li id="_400">"Erase disk ans use ZFS"</li><li id="_401">Encrypt the new Ubuntu installation for security</li></ul></div>After this, the GUI felt fast, who would have thought that erasing a bunch of stuff would make the system faster!</div><div class="p" id="_402"><code>lsblk</code> contains:<div class="code" id="_403"><div><pre><code>zd0               230:0    0   500M  0 disk
└─keystore-rpool  253:0    0   484M  0 crypt /run/keystore/rpool
nvme0n1           259:0    0 476.9G  0 disk
├─nvme0n1p1       259:1    0   512M  0 part  /boot/efi
├─nvme0n1p2       259:2    0     2G  0 part
│ └─cryptoswap    253:1    0     2G  0 crypt
├─nvme0n1p3       259:3    0     2G  0 part
└─nvme0n1p4       259:4    0 472.4G  0 part</code></pre></div></div>and <code>lsblk -f</code>:<div class="code" id="_404"><div><pre><code>zd0               crypto_LUKS 2
└─keystore-rpool  ext4        1.0   keystore-rpool
nvme0n1
├─nvme0n1p1       vfat        FAT32
├─nvme0n1p2       crypto_LUKS 2
│ └─cryptoswap
├─nvme0n1p3       zfs_member  5000  bpool
└─nvme0n1p4       zfs_member  5000  rpoo</code></pre></div></div></div><div class="p" id="_405">Then:<div class="code" id="_406"><div><pre><code>grep '[rb]pool' /proc/mounts</code></pre></div></div>contains:<div class="code" id="_407"><div><pre><code>rpool/ROOT/ubuntu_uvs1fq / zfs rw,relatime,xattr,posixacl 0 0
rpool/USERDATA/ciro_czngbg /home/ciro zfs rw,relatime,xattr,posixacl 0 0
rpool/USERDATA/root_czngbg /root zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/srv /srv zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/usr/local /usr/local zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/games /var/games zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/log /var/log zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/lib /var/lib zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/mail /var/mail zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/snap /var/snap zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/www /var/www zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/spool /var/spool zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/lib/AccountsService /var/lib/AccountsService zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/lib/NetworkManager /var/lib/NetworkManager zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/lib/apt /var/lib/apt zfs rw,relatime,xattr,posixacl 0 0
rpool/ROOT/ubuntu_uvs1fq/var/lib/dpkg /var/lib/dpkg zfs rw,relatime,xattr,posixacl 0 0
bpool/BOOT/ubuntu_uvs1fq /boot zfs rw,nodev,relatime,xattr,posixacl 0 0</code></pre></div></div>which gives an idea of how the above map to mountpoints.</div><div class="p" id="_408">Had two GUI freezes since installation, a fixed images shows no matter what I do, possibly graphics only, but impossible to tell (next time I'll try SSH access). No <a href="../computer-hardware#nvidia">Nvidia</a> drivers installed yet.</div></li></ul></div><div class="p" id="_409">2020-06-06: dropped some lemon juice on the bottom left of touchpad. Bottom left button not working anymore... I'm an idiot. There are many other alternatives, but very aggravating, I'll replace it for sure. Can't find the exact replacement part or any videos showing its replacement online easliy, dang. For the T430: <a href="https://www.youtube.com/watch?v=F3lzV9uXRjU">www.youtube.com/watch?v=F3lzV9uXRjU</a> Asked at: <a href="https://forums.lenovo.com/t5/ThinkPad-P-and-W-Series-Mobile-Workstations/P51-left-bottom-button-below-trackpad-mouse-left-click-stopped-working-possible-to-replace/m-p/5019903">forums.lenovo.com/t5/ThinkPad-P-and-W-Series-Mobile-Workstations/P51-left-bottom-button-below-trackpad-mouse-left-click-stopped-working-possible-to-replace/m-p/5019903</a> Also I could not access it because you need to remove the HDD first: <a href="https://www.youtube.com/watch?v=5Klawxc7T_Y">www.youtube.com/watch?v=5Klawxc7T_Y</a> and I can't pull it out even with considerable force, unlike in the video... And OMG, those button caps are impossible to re-install once removed!!! Then when I put the whole thing back together, the upper buttons were not working anymore. FUUUUUUUUCK. When first opening I pulled on it without properly removing the cap and it came off, but it didn't look broken in any way and I put it back in. Keyboard works thank God, so right black connector is fine, left white one oppears to be the one for upper keys and trackpoint, both of which stopped working. The hardware manual confirms that they are both part of the same device, so basically a mouse :-) TODO can it be bought separately from te keyboard? Doesn't look like it, photo of keyboard part includes those buttons. The manual also confirms that the bottom buttons are one device with the trackpad "trackpad with buttons", thus forming the second entire mouse.</div><div class="p" id="_410">2019-04-17: popup asking about "ThinkPad P51 Management Engine Update" from from 182.29.3287 to 184.60.3561, said yes.</div><div class="p" id="_411"><a href="../systems-programming#ubuntu">Ubuntu</a> 17.10 setup after buying it:</div><div class="list"><ul id="_412"><li id="_413">partition setup: <a href="https://askubuntu.com/questions/343268/how-to-use-manual-partitioning-during-installation/976430#976430">askubuntu.com/questions/343268/how-to-use-manual-partitioning-during-installation/976430#976430</a></li><li id="_414">BIOS:<div class="list"><ul id="_415"><li id="_416">for NVIDIA driver:</li><li id="_417">for KVM, required by Android Emulator: enable virtualization extensions</li></ul></div></li><li id="_418">TODO fix the brightness keys:<div class="list"><ul id="_419"><li id="_420">failed: <a href="https://askubuntu.com/questions/769006/brightness-key-not-working-ubuntu-16-04-lts/770100#770100">askubuntu.com/questions/769006/brightness-key-not-working-ubuntu-16-04-lts/770100#770100</a></li></ul></div></li></ul></div><div class="p" id="_421">Battery life shown by Ubuntu battery app after installation:</div><div class="list"><ul id="_422"><li id="_423">before NVIDIA driver setup: 8h</li><li id="_424">after: 6.5h</li></ul></div><h2 id="_ancestors"><a href="#_ancestors"><span class="fa-solid-900 icon"></span> Ancestors <span class="meta">(6)</span></a></h2><div class="list"><ol><li><a href="../ciro-santilli-s-hardware#lenovo-thinkpad-p51-2017">Lenovo ThinkPad P51 (2017)</a></li><li><a href="../ciro-santilli-s-hardware#laptop">Laptop</a></li><li><a href="../ciro-santilli-s-hardware#computers">Computers</a></li><li><a href="../ciro-santilli-s-hardware">Ciro Santilli's hardware</a></li><li><a href="../ciro-santilli">Ciro Santilli</a></li><li><a href=".."><span title="Home" class="fa-solid-900 icon"></span> Home</a></li></ol></div>
</main>
<footer>
<div>Powered by <a href="https://docs.ourbigbook.com">OurBigBook</a></div>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/issues">Suggestions and corrections</a></div>
<div><a href="../contact">Contact Ciro Santilli</a></div>
<div><a href="../_dir">Website source code</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io">Website source code on GitHub</a></div>
<div><a href="../_file/ciro-santilli-s-hardware.bigb">Source code for this page: ciro-santilli-s-hardware.bigb</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/blob/f7dac29d5224c15015eee520ccee15a3adb07b98/ciro-santilli-s-hardware.bigb">Source code for this page on GitHub</a></div>
<div>Cite with: <a href="https://zenodo.org/badge/latestdoi/16453261">this DOI</a></div>
<div><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_left_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye"></div>
</footer>
<script>
window.ourbigbook_split_headers = true;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "ciro-santilli-s-hardware/";
</script>
<script src="../_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script><script src="../_raw/main.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47867706-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEE2HEJW9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DEE2HEJW9X');
</script>
<script src="https://giscus.app/client.js"
        data-repo="cirosantilli/cirosantilli.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQ1MzI2MQ=="
        data-category="giscus"
        data-category-id="DIC_kwDOAPsOjc4CZ6zZ"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</body>
</html>

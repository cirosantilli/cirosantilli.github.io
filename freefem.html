<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>FreeFem - Ciro Santilli</title>
<meta property="og:title" content="FreeFem - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
<meta property="og:url" content="https://cirosantilli.com/freefem">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="canonical" href="https://ourbigbook.com/cirosantilli/freefem">
<style>@import "_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="_raw/main.css">
<link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_square_398.jpg">
</head>
<body>
<header>
<div class="brand-group">
<a href="." class="brand"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_right_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye">Ciro Santilli</a>
<a href="https://ourbigbook.com/cirosantilli"><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ourbigbook-logo-v1.svg" loading="lazy" alt="OurBigBook logo">OurBigBook.com</a>
<a class="font-awesome-container" href="https://stackoverflow.com/users/895245"><i class="fab fa-stack-overflow fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://github.com/cirosantilli"><i class="fab fa-github fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.linkedin.com/in/cirosantilli"><i class="fab fa-linkedin fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.youtube.com/c/CiroSantilli"><i class="fab fa-youtube fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://twitter.com/cirosantilli"><i class="fab fa-twitter fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.zhihu.com/people/cirosantilli/activities"><i class="fab fa-zhihu fa-fw icon"></i></a>
<a class="font-awesome-container" href="https://www.weibo.com/p/1005055601627311"><i class="fab fa-weibo fa-fw icon"></i></a>
<a href="sponsor"><span class="icon">$£</span>&nbsp;Sponsor</a>
<a href="https://github.com/cirosantilli/china-dictatorship"><span class="icon">中国</span>独裁统治&nbsp;China Dictatorship 新疆改造中心、六四事件、法轮功、郝海东、709大抓捕、2015巴拿马文件 邓家贵、低端人口、西藏骚乱</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="freefem"><div class="notnav"><h1><a href="">FreeFem</a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav ancestors"><a  href="#_ancestors">&nbsp;...</a><a href="mathematics"> Mathematics</a><a href="mathematics#area-of-mathematics"> Area of mathematics</a><a href="calculus"> Calculus</a><a href="calculus#differential-equation"> Differential equation</a><a href="calculus#partial-differential-equation"> Partial differential equation</a><a href="calculus#partial-differential-equation-solver"> Partial differential equation solver</a></div><div class="nav"><a href="#_toc" class="toc"></a><a href="https://en.wikipedia.org/wiki/FreeFem++" class="wiki"></a><a href="https://ourbigbook.com/cirosantilli/freefem"><img src="_obb/logo.svg" class="logo" alt=""> OurBigBook.com</a><a class="nosplit" href="calculus#freefem"></a><span class="metrics"><span class="wcntr"> Words: 550</span><span class="dcnt"> Articles: 3</span></span></div></nav></div><div class="p" id="_543"><a href="https://freefem.org/">freefem.org/</a></div><div class="p" id="_544"><a href="https://github.com/FreeFem/FreeFem-sources">github.com/FreeFem/FreeFem-sources</a></div><div class="p" id="_545">Started in 1987 and written in Pascal, by the French from <a href="university#pierre-and-marie-curie-university">Pierre and Marie Curie University</a>, the French are really strong in <a href="mathematics#numerical-analysis">numerical analysis</a>.</div><div class="p" id="_546">Ciro wasn't expecting it to be as old. Ported to C++ in 1992.</div><div class="p" id="_547">The fact that French wrote it can be seen in the documentation, for example <a href="https://doc.freefem.org/tutorials/index.html">doc.freefem.org/tutorials/index.html</a> uses file extension <code>mycode.edp</code> instead of <code>mycode.pde</code> where <code>dep</code> stands for "<a href="https://fr.wikipedia.org/wiki/%C3%89quation_aux_d%C3%A9riv%C3%A9es_partielles">Équation aux dérivées partielles</a>".</div><div class="p" id="_548">Besides the painful build, using FreeFem is relatively simple, as can be seen from the examples on the website.</div><div class="p" id="_549">They do use a <a href="computer#domain-specific-language">domain-specific language</a> on the examples, which appears to be the main/only interface, which is a bad thing, Ciro would rather have a <a href="programming-language#python-programming-language">Python</a> <a href="software#application-programming-interface">API</a> as the "main API", which is more the approach taken by the <a href="calculus#fenics-project">FEniCS Project</a>, but so be it. This <a href="computer#domain-specific-language">domain-specific language</a> business means that you always stumble upon basic stuff you want to do but can't, and then you have to think about how to share data between the simulation and the plotting. The plotting notably is super complex and they can't implement all of what people want, upstream examples often offload that to gnuplot. This is potentially a big advantage of <a href="calculus#fenics-project">FEniCS Project</a>.</div><div class="p" id="_550">It nice though that they do have some graphics out of the box, as that allows to quickly debug common problems.</div><div class="p" id="_551">Uses <a href="calculus#variational-formulation-of-a-partial-differential-equation">variational formulation of a partial differential equation</a>, which is not immediately obvious to beginners? The introduction <a href="https://doc.freefem.org/tutorials/poisson.html">doc.freefem.org/tutorials/poisson.html</a> gives an ultra quick example, but your are mostly on your own with that.</div><div class="p" id="_552">On Ubuntu 20.04, the <code>freefem</code> is a bit out-of-date (3.5.8, there isn't even a tag for that in the <a href="software#github">GitHub</a> repo, and refs/tags/release_3_10 is from 2010!) and fails to run the examples from the website. It did work with the example package though, but the output does not have color, which makes me sad :-)<div class="code" id="_553"><div><pre><code>sudo apt install freefem freefem-examples
freefem /usr/share/doc/freefem-examples/heat.pde</code></pre></div></div></div><div class="p" id="_554">So let's just compile the latest v4.6 it from source, on Ubuntu 20.04:<div class="code" id="_555"><div><pre><code>sudo apt build-dep freefem
git clone https://github.com/FreeFem/FreeFem-sources
cd FreeFem-sources
# Post v4.6 with some fixes.
git checkout 3df0e2370d9752801ac744b11307b14e16743a44

# Won't apply automatically due to tab hell.
# https://superuser.com/questions/607410/how-to-copy-paste-tab-characters-via-the-clipboard-into-terminal-session-on-gnom
git apply &lt;&lt;'EOS'
diff --git a/3rdparty/ff-petsc/Makefile b/3rdparty/ff-petsc/Makefile
index dc62ab06..13cd3253 100644
--- a/3rdparty/ff-petsc/Makefile
+++ b/3rdparty/ff-petsc/Makefile
@@ -204,7 +204,7 @@ $(SRCDIR)/tag-make-real:$(SRCDIR)/tag-conf-real
 $(SRCDIR)/tag-install-real :$(SRCDIR)/tag-make-real
     cd $(SRCDIR) &amp;&amp; $(MAKE) PETSC_DIR=$(PETSC_DIR) PETSC_ARCH=fr install
     -test -x "`type -p otool`" &amp;&amp; make changer
-    cd $(SRCDIR) &amp;&amp; $(MAKE) PETSC_DIR=$(PETSC_DIR) PETSC_ARCH=fr check
+    #cd $(SRCDIR) &amp;&amp; $(MAKE) PETSC_DIR=$(PETSC_DIR) PETSC_ARCH=fr check
     test -e $(DIR_INSTALL_REAL)/include/petsc.h
     test -e $(DIR_INSTALL_REAL)/lib/petsc/conf/petscvariables
     touch $@
@@ -293,7 +293,6 @@ $(SRCDIR)/tag-tar:$(PACKAGE)
     -tar xzf $(PACKAGE)
     patch -p1 &lt; petsc-hpddm.patch
 ifeq ($(WIN32DLLTARGET),)
-    patch -p1 &lt; petsc-metis.patch
 endif
     touch $@
 $(PACKAGE):
EOS

autoreconf -i
./configure --enable-download --enable-optim --prefix="$(pwd)/../FreeFem-install"
./3rdparty/getall -a
cd 3rdparty/ff-petsc
make petsc-slepc
cd -
./reconfigure
make -j`nproc`
make install
cd ../FreeFem-install
PATH="${PATH}:$(pwd)/bin" ./bin/FreeFem++ ../FreeFem-sources/examples/tutorial/</code></pre></div></div></div><div class="p" id="_556">Ciro's initial build experience was a bit painful, possibly because it was done on a relatively new Ubuntu 20.04 as of June 2020, but in the end it worked: <a href="https://github.com/FreeFem/FreeFem-sources/issues/141">github.com/FreeFem/FreeFem-sources/issues/141</a></div><div class="p" id="_557">The main/only dependency appears to be <a href="https://en.wikipedia.org/wiki/Portable,_Extensible_Toolkit_for_Scientific_Computation">PETSc</a> which is used by default, which is a good sign, as that library appears to automatically parallelize a single input to several backends (single <a href="computer-hardware#central-processing-unit">CPU</a>, MPI, GPU) so you know things will scale up as you reach simulations.</div><div class="p" id="_558">The problem is that it compiling such a complex dependency opens up much more room for hard to solve compilation errors, and takes a lot more time.</div><div class="toc-container" id="_toc"><ul><li class="has-child toplevel"><div class="title-div"><div class="arrow"><div></div></div><span class="not-arrow"><a class="title toc" href="#_toc"> Table of contents</a><input class="search" placeholder="🔍 Search. Shortcut: / (slash)"><span class="hover-metadata"><span class="metrics"><span class="wcntr"> 550</span><span class="dcnt"> 3</span></span></span></span></div><ul><li class="has-child"><div id="_toc/freefem-examples"><div class="arrow"><div></div></div><span class="not-arrow"><a href="calculus#freefem-examples">FreeFem examples</a><span class="hover-metadata"><a href="#_toc" class="u"> FreeFem</a><span class="metrics"><span class="wcntr"> 7</span><span class="dcnt"> 2</span></span></span></span></div><ul><li><div id="_toc/heat-dirichlet-1d-freefem"><div class="arrow"><div></div></div><span class="not-arrow"><a href="calculus#heat-dirichlet-1d-freefem">heat-dirichlet.1d.freefem</a><span class="hover-metadata"><a href="#_toc/freefem-examples" class="u"> FreeFem examples</a><span class="metrics"><span class="wcntr"> 3</span></span></span></span></div></li><li><div id="_toc/heat-dirichlet-2d-freefem"><div class="arrow"><div></div></div><span class="not-arrow"><a href="calculus#heat-dirichlet-2d-freefem">heat-dirichlet-2d-freefem</a><span class="hover-metadata"><a href="#_toc/freefem-examples" class="u"> FreeFem examples</a><span class="metrics"><span class="wcntr"> 4</span></span></span></span></div></li></ul></li></ul></li></ul></div><h2 id="_ancestors"><a href="#_ancestors"><span class="fa-solid-900 icon"></span> Ancestors <span class="meta">(7)</span></a></h2><div class="list"><ol><li><a href="calculus#partial-differential-equation-solver">Partial differential equation solver</a></li><li><a href="calculus#partial-differential-equation">Partial differential equation</a></li><li><a href="calculus#differential-equation">Differential equation</a></li><li><a href="calculus">Calculus</a></li><li><a href="mathematics#area-of-mathematics">Area of mathematics</a></li><li><a href="mathematics">Mathematics</a></li><li><a href="."><span title="Home" class="fa-solid-900 icon"></span> Home</a></li></ol></div><h2 id="_incoming-links"><a href="#_incoming-links"><span title="Incoming links" class="fa-solid-900 icon"></span> Incoming links <span class="meta">(6)</span></a></h2><div class="list"><ul><li><a href="ciro-santilli#ciro-santilli-s-open-source-enlightenment">Ciro Santilli's Open Source Enlightenment</a></li><li><a href="calculus#dirichlet-boundary-condition">Dirichlet boundary condition</a></li><li><a href="calculus#fenics-project">FEniCS Project</a></li><li><a href="calculus#heat-equation">Heat equation</a></li><li><a href="calculus#robin-boundary-condition">Robin boundary condition</a></li><li><a href="calculus#variational-formulation-of-a-partial-differential-equation">Variational formulation of a partial differential equation</a></li></ul></div>
</main>
<footer>
<div>Powered by <a href="https://docs.ourbigbook.com">OurBigBook</a></div>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/issues">Suggestions and corrections</a></div>
<div><a href="contact">Contact Ciro Santilli</a></div>
<div><a href="_dir">Website source code</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io">Website source code on GitHub</a></div>
<div><a href="_file/calculus.bigb">Source code for this page: calculus.bigb</a></div>
<div><a href="https://github.com/cirosantilli/cirosantilli.github.io/blob/f7dac29d5224c15015eee520ccee15a3adb07b98/calculus.bigb">Source code for this page on GitHub</a></div>
<div>Cite with: <a href="https://zenodo.org/badge/latestdoi/16453261">this DOI</a></div>
<div><img src="https://raw.githubusercontent.com/cirosantilli/media/master/ID_photo_of_Ciro_Santilli_taken_in_2013_left_eye_200_100.jpg" loading="lazy" alt="ID photo of Ciro Santilli taken in 2013 right eye"></div>
</footer>
<script>
window.ourbigbook_split_headers = true;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "";
</script>
<script src="_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script><script src="_raw/main.js"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47867706-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEE2HEJW9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DEE2HEJW9X');
</script>
<script src="https://giscus.app/client.js"
        data-repo="cirosantilli/cirosantilli.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQ1MzI2MQ=="
        data-category="giscus"
        data-category-id="DIC_kwDOAPsOjc4CZ6zZ"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</body>
</html>
